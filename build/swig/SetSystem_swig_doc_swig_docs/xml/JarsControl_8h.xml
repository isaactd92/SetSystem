<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="JarsControl_8h" kind="file" language="C++">
    <compoundname>JarsControl.h</compoundname>
    <includes refid="RdpToolsBeta_8h" local="yes">RdpToolsBeta/RdpToolsBeta.h</includes>
    <includes local="no">stdio.h</includes>
    <includes local="no">stdlib.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">iostream</includes>
    <includes local="no">pthread.h</includes>
    <includes local="no">unistd.h</includes>
    <includes local="no">zmq.hpp</includes>
    <includes local="no">vector</includes>
    <includes local="no">stdint.h</includes>
    <includes local="no">assert.h</includes>
    <includes local="no">bits/stdc++.h</includes>
    <includes local="no">sys/socket.h</includes>
    <includes local="no">netinet/in.h</includes>
    <includes local="no">arpa/inet.h</includes>
    <includes local="no">netdb.h</includes>
    <includes local="no">gnuradio/math.h</includes>
    <includes local="no">gnuradio/prefs.h</includes>
    <includes local="no">stdexcept</includes>
    <includes local="no">errno.h</includes>
    <includes local="no">boost/asio.hpp</includes>
    <includes local="no">boost/format.hpp</includes>
    <includes local="no">gnuradio/thread/thread.h</includes>
    <includedby refid="ArgProcessor_8h" local="yes">ArgProcessor.h</includedby>
    <incdepgraph>
      <node id="166">
        <label>sys/stat.h</label>
      </node>
      <node id="158">
        <label>/opt/intel/ipp/include/ipp.h</label>
      </node>
      <node id="154">
        <label>RdpToolsBeta/RdpToolsBeta.h</label>
        <link refid="RdpToolsBeta_8h"/>
        <childnode refid="155" relation="include">
        </childnode>
        <childnode refid="156" relation="include">
        </childnode>
        <childnode refid="157" relation="include">
        </childnode>
        <childnode refid="158" relation="include">
        </childnode>
        <childnode refid="159" relation="include">
        </childnode>
        <childnode refid="160" relation="include">
        </childnode>
      </node>
      <node id="182">
        <label>netinet/in.h</label>
      </node>
      <node id="183">
        <label>arpa/inet.h</label>
      </node>
      <node id="185">
        <label>gnuradio/math.h</label>
      </node>
      <node id="180">
        <label>bits/stdc++.h</label>
      </node>
      <node id="179">
        <label>assert.h</label>
      </node>
      <node id="170">
        <label>/usr/include/python2.7/Python.h</label>
      </node>
      <node id="171">
        <label>MemoryManager/MemoryManager.h</label>
        <link refid="MemoryManager_8h"/>
        <childnode refid="172" relation="include">
        </childnode>
        <childnode refid="174" relation="include">
        </childnode>
      </node>
      <node id="173">
        <label>ExperimentConstants/ExperimentConstants.h</label>
        <link refid="ExperimentConstants_8h"/>
        <childnode refid="161" relation="include">
        </childnode>
        <childnode refid="165" relation="include">
        </childnode>
        <childnode refid="162" relation="include">
        </childnode>
      </node>
      <node id="178">
        <label>stdint.h</label>
      </node>
      <node id="161">
        <label>stdlib.h</label>
      </node>
      <node id="190">
        <label>boost/format.hpp</label>
      </node>
      <node id="159">
        <label>cmath</label>
      </node>
      <node id="188">
        <label>errno.h</label>
      </node>
      <node id="187">
        <label>stdexcept</label>
      </node>
      <node id="156">
        <label>string</label>
      </node>
      <node id="155">
        <label>exception</label>
      </node>
      <node id="184">
        <label>netdb.h</label>
      </node>
      <node id="160">
        <label>JicaHeader/JicaHeader.h</label>
        <link refid="JicaHeader_8h"/>
        <childnode refid="161" relation="include">
        </childnode>
        <childnode refid="162" relation="include">
        </childnode>
        <childnode refid="163" relation="include">
        </childnode>
        <childnode refid="156" relation="include">
        </childnode>
        <childnode refid="164" relation="include">
        </childnode>
        <childnode refid="157" relation="include">
        </childnode>
        <childnode refid="165" relation="include">
        </childnode>
        <childnode refid="166" relation="include">
        </childnode>
        <childnode refid="167" relation="include">
        </childnode>
        <childnode refid="168" relation="include">
        </childnode>
        <childnode refid="169" relation="include">
        </childnode>
        <childnode refid="170" relation="include">
        </childnode>
        <childnode refid="171" relation="include">
        </childnode>
        <childnode refid="175" relation="include">
        </childnode>
      </node>
      <node id="189">
        <label>boost/asio.hpp</label>
      </node>
      <node id="191">
        <label>gnuradio/thread/thread.h</label>
      </node>
      <node id="176">
        <label>pthread.h</label>
      </node>
      <node id="164">
        <label>string.h</label>
      </node>
      <node id="175">
        <label>zmq.hpp</label>
      </node>
      <node id="153">
        <label>JarsControl.h</label>
        <link refid="JarsControl_8h"/>
        <childnode refid="154" relation="include">
        </childnode>
        <childnode refid="163" relation="include">
        </childnode>
        <childnode refid="161" relation="include">
        </childnode>
        <childnode refid="164" relation="include">
        </childnode>
        <childnode refid="157" relation="include">
        </childnode>
        <childnode refid="176" relation="include">
        </childnode>
        <childnode refid="177" relation="include">
        </childnode>
        <childnode refid="175" relation="include">
        </childnode>
        <childnode refid="168" relation="include">
        </childnode>
        <childnode refid="178" relation="include">
        </childnode>
        <childnode refid="179" relation="include">
        </childnode>
        <childnode refid="180" relation="include">
        </childnode>
        <childnode refid="181" relation="include">
        </childnode>
        <childnode refid="182" relation="include">
        </childnode>
        <childnode refid="183" relation="include">
        </childnode>
        <childnode refid="184" relation="include">
        </childnode>
        <childnode refid="185" relation="include">
        </childnode>
        <childnode refid="186" relation="include">
        </childnode>
        <childnode refid="187" relation="include">
        </childnode>
        <childnode refid="188" relation="include">
        </childnode>
        <childnode refid="189" relation="include">
        </childnode>
        <childnode refid="190" relation="include">
        </childnode>
        <childnode refid="191" relation="include">
        </childnode>
      </node>
      <node id="177">
        <label>unistd.h</label>
      </node>
      <node id="168">
        <label>vector</label>
      </node>
      <node id="162">
        <label>time.h</label>
      </node>
      <node id="157">
        <label>iostream</label>
      </node>
      <node id="165">
        <label>sys/timeb.h</label>
      </node>
      <node id="181">
        <label>sys/socket.h</label>
      </node>
      <node id="172">
        <label>ExperimentParameters/ExperimentParameters.h</label>
        <link refid="ExperimentParameters_8h"/>
        <childnode refid="161" relation="include">
        </childnode>
        <childnode refid="163" relation="include">
        </childnode>
        <childnode refid="164" relation="include">
        </childnode>
        <childnode refid="156" relation="include">
        </childnode>
        <childnode refid="173" relation="include">
        </childnode>
      </node>
      <node id="186">
        <label>gnuradio/prefs.h</label>
      </node>
      <node id="174">
        <label>complex</label>
      </node>
      <node id="169">
        <label>algorithm</label>
      </node>
      <node id="163">
        <label>stdio.h</label>
      </node>
      <node id="167">
        <label>dirent.h</label>
      </node>
    </incdepgraph>
    <invincdepgraph>
      <node id="192">
        <label>JarsControl.h</label>
        <link refid="JarsControl_8h"/>
        <childnode refid="193" relation="include">
        </childnode>
      </node>
      <node id="193">
        <label>ArgProcessor.h</label>
        <link refid="ArgProcessor_8h"/>
      </node>
    </invincdepgraph>
    <innerclass refid="structaddress" prot="public">address</innerclass>
    <innerclass refid="structjars__cmd" prot="public">jars_cmd</innerclass>
    <innerclass refid="classsp601__command" prot="public">sp601_command</innerclass>
    <innerclass refid="class__JARSControl" prot="public">_JARSControl</innerclass>
    <innerclass refid="classsp601__config" prot="public">sp601_config</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="JarsControl_8h_1ae6cae658beb94f4ddfcaa58ee33dd38b" prot="public" static="no">
        <name>RCV_BUFSIZE</name>
        <initializer>1472</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="60" column="9" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="60" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="JarsControl_8h_1a1aa9678f48f9b9661062c9246e64993a" prot="public" static="no">
        <name>RST_CTRL</name>
        <initializer>0x05</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="72" column="10" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="72" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="JarsControl_8h_1a52e278dd9e601652e8ab11b70c53ef6e" prot="public" static="no">
        <name>MODE_OPER</name>
        <initializer>0x03</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="73" column="10" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="73" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="JarsControl_8h_1ab8923675701bbbb7f51c4e68fac5e588" prot="public" static="no">
        <name>ELECTION_RXD</name>
        <initializer>0x04</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="74" column="10" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="74" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="JarsControl_8h_1a063240a0c681e13158e249f55ac4b750" prot="public" static="no">
        <name>POWER_RXD</name>
        <initializer>0x06</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="75" column="10" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="75" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="JarsControl_8h_1aefde68a634d66b7039aa56de3fd5301b" prot="public" static="no">
        <name>PROG_RXD</name>
        <initializer>0x09</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="76" column="10" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="76" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="JarsControl_8h_1ad7e5e3b2ac85d92fe9b81bac2368ca02" prot="public" static="no">
        <name>ENABLE_TRANSF</name>
        <initializer>0x0A</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="77" column="10" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="77" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="JarsControl_8h_1aacac2365f297d20c92dac6c32a87c6a3" prot="public" static="no">
        <name>DISABLE_TRANSF</name>
        <initializer>0x0B</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="78" column="10" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="78" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="enum">
      <memberdef kind="enum" id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152" prot="public" static="no">
        <name>JARS_CMD</name>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a7316843e88740cd819c6427a7f833df6" prot="public">
          <name>NOOP</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abff6b2d1371663911c20d04738892bfd" prot="public">
          <name>SET_SP601_IP</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a578a2dc0f32dacf50c510f7009c12d1f" prot="public">
          <name>SET_SP601_PORT</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a9dd105b07676790bd963c49f607588b9" prot="public">
          <name>GET_SP601_MAC</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abd7b2f700ca4ef2b11180557059e6bbd" prot="public">
          <name>SET_COMMS_IP</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a57446329e1b880f1e79096d89ca90abf" prot="public">
          <name>SET_COMMS_PORT</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152aedb06bfaf37d18638b99cabc860b5c4b" prot="public">
          <name>SET_COMMS_MAC</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152af2fb94d1fd1739ad68220e57882efa23" prot="public">
          <name>GET_VALUE</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a55636b09cf88b31facd828042757e8cd" prot="public">
          <name>DATA_LOOPS</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" prot="public">
          <name>SEND_COMMAND</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a977ee7b118a6816596e05f1c5c6221f2" prot="public">
          <name>CHECK_ACK</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a28b6b130f7a5b8cdbee96bb17ef151af" prot="public">
          <name>SEND_FILTER</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="62" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="62" bodyend="62"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" prot="public" static="no" mutable="no">
        <type>boost::asio::ip::udp::socket *</type>
        <definition>boost::asio::ip::udp::socket* local_socket</definition>
        <argsstring></argsstring>
        <name>local_socket</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="41" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="41" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="JarsControl_8h_1aa6e78a1fa6723425d76b1aae3928fc9b" prot="public" static="no" mutable="no">
        <type>boost::asio::io_service</type>
        <definition>boost::asio::io_service local_io_service</definition>
        <argsstring></argsstring>
        <name>local_io_service</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="42" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="42" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="JarsControl_8h_1acc668b68847453065b3681978e25f217" prot="public" static="no" mutable="no">
        <type>boost::asio::ip::udp::endpoint</type>
        <definition>boost::asio::ip::udp::endpoint destino_endpoint</definition>
        <argsstring></argsstring>
        <name>destino_endpoint</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="44" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="44" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="JarsControl_8h_1ab25fcf174daff72a94fd8a69424c6a2e" prot="public" static="no" mutable="no">
        <type><ref refid="class__JARSControl" kindref="compound">_JARSControl</ref></type>
        <definition>_JARSControl JARSControl</definition>
        <argsstring></argsstring>
        <name>JARSControl</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="175" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="175" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="JarsControl_8h_1ac35468256656a04613e24a7e08d81167" prot="public" static="no" mutable="no">
        <type><ref refid="classsp601__config" kindref="compound">sp601_config</ref></type>
        <definition>sp601_config cfg</definition>
        <argsstring></argsstring>
        <name>cfg</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="200" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="200" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="JarsControl_8h_1aaef9d5a8a094f6486db3073c3ee31464" prot="public" static="no" mutable="no">
        <type>struct <ref refid="structjars__cmd" kindref="compound">jars_cmd</ref></type>
        <definition>struct jars_cmd JARS_CMD[]</definition>
        <argsstring>[]</argsstring>
        <name>JARS_CMD</name>
        <initializer>= {
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a7316843e88740cd819c6427a7f833df6" kindref="member">NOOP</ref>]			=	 	{&quot;NOOP&quot;,0,0,false},			
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abff6b2d1371663911c20d04738892bfd" kindref="member">SET_SP601_IP</ref>]		=		{&quot;SET_SP601_IP&quot;,1,4,true},		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a578a2dc0f32dacf50c510f7009c12d1f" kindref="member">SET_SP601_PORT</ref>]	=		{&quot;SET_SP601_PORT&quot;,2,2,true},		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a9dd105b07676790bd963c49f607588b9" kindref="member">GET_SP601_MAC</ref>]		=		{&quot;GET_SP601_MAC&quot;,3,6,true},		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abd7b2f700ca4ef2b11180557059e6bbd" kindref="member">SET_COMMS_IP</ref>]		=		{&quot;SET_COMMS_IP&quot;,4,4,true},		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a57446329e1b880f1e79096d89ca90abf" kindref="member">SET_COMMS_PORT</ref>]	=		{&quot;SET_COMMS_PORT&quot;,5,2,true}, 		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152aedb06bfaf37d18638b99cabc860b5c4b" kindref="member">SET_COMMS_MAC</ref>]		= 		{&quot;SET_COMMS_MAC&quot;,6,6,true}, 		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152af2fb94d1fd1739ad68220e57882efa23" kindref="member">GET_VALUE</ref>]		=	 	{&quot;GET_VALUE&quot;,8,0,false}, 		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a55636b09cf88b31facd828042757e8cd" kindref="member">DATA_LOOPS</ref>]		= 		{&quot;DATA_LOOPS&quot;,63,8,false}, 		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>]	  	= 		{&quot;SEND_COMMAND&quot;,64,3,false}, 		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a977ee7b118a6816596e05f1c5c6221f2" kindref="member">CHECK_ACK</ref>]		= 		{&quot;CHECK_ACK&quot;,65,1,false}, 		
	[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a28b6b130f7a5b8cdbee96bb17ef151af" kindref="member">SEND_FILTER</ref>]		=	 	{&quot;SEND_FILTER&quot;,66,0,false} 		
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="929" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="949" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="JarsControl_8h_1ab2dd9706c8afee0101f9fb673f23a9e1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void fpga_con_init</definition>
        <argsstring>(char *host, int lport)</argsstring>
        <name>fpga_con_init</name>
        <param>
          <type>char *</type>
          <declname>host</declname>
        </param>
        <param>
          <type>int</type>
          <declname>lport</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="46" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1037" bodyend="1056"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1a8ec1b8a8eeca1b70875f6a4c037dc3e1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ssize_t</type>
        <definition>ssize_t fpga_con_send</definition>
        <argsstring>(const char *buf, size_t len)</argsstring>
        <name>fpga_con_send</name>
        <param>
          <type>const char *</type>
          <declname>buf</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>len</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="47" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1061" bodyend="1073"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ssize_t</type>
        <definition>ssize_t fpga_con_recv</definition>
        <argsstring>(char *dbuf, size_t dsize)</argsstring>
        <name>fpga_con_recv</name>
        <param>
          <type>char *</type>
          <declname>dbuf</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>dsize</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="48" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1077" bodyend="1086"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1ae3793cb02de7605c651d1762415629f8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void IPstr_to_bytearray</definition>
        <argsstring>(char *IPstr, char *parts)</argsstring>
        <name>IPstr_to_bytearray</name>
        <param>
          <type>char *</type>
          <declname>IPstr</declname>
        </param>
        <param>
          <type>char *</type>
          <declname>parts</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="50" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1242" bodyend="1252"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1a9fe1a038e1882c74961f61186cc7a811" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void MACstr_to_bytearray</definition>
        <argsstring>(char *MACstr, char *parts)</argsstring>
        <name>MACstr_to_bytearray</name>
        <param>
          <type>char *</type>
          <declname>MACstr</declname>
        </param>
        <param>
          <type>char *</type>
          <declname>parts</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="51" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1268" bodyend="1279"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void intToBytes</definition>
        <argsstring>(int number, char *arrayOfByte, size_t size)</argsstring>
        <name>intToBytes</name>
        <param>
          <type>int</type>
          <declname>number</declname>
        </param>
        <param>
          <type>char *</type>
          <declname>arrayOfByte</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>size</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="52" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1282" bodyend="1286"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1a0a6858dd58a8b8b154e5dd149fafd01d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void bytearray_to_IPstr</definition>
        <argsstring>(const char *bytes, char *IPstr)</argsstring>
        <name>bytearray_to_IPstr</name>
        <param>
          <type>const char *</type>
          <declname>bytes</declname>
        </param>
        <param>
          <type>char *</type>
          <declname>IPstr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="53" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1255" bodyend="1258"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1a19a52ae0d3c91c019542bc76a720aef9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void bytearray_to_int</definition>
        <argsstring>(const char *byte_array, int num)</argsstring>
        <name>bytearray_to_int</name>
        <param>
          <type>const char *</type>
          <declname>byte_array</declname>
        </param>
        <param>
          <type>int</type>
          <declname>num</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="54" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1261" bodyend="1265"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1a186f7c0fc2f44b39853cd79d8daa6b65" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void bytearray_to_MACstr</definition>
        <argsstring>(const char *bytes, char *MACstr)</argsstring>
        <name>bytearray_to_MACstr</name>
        <param>
          <type>const char *</type>
          <declname>bytes</declname>
        </param>
        <param>
          <type>char *</type>
          <declname>MACstr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="55" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1289" bodyend="1291"/>
      </memberdef>
      <memberdef kind="function" id="JarsControl_8h_1a44ec176a02a62ada468ebde1b3f6e9f0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>char *</type>
        <definition>char * itoa</definition>
        <argsstring>(int num, char *str, int base)</argsstring>
        <name>itoa</name>
        <param>
          <type>int</type>
          <declname>num</declname>
        </param>
        <param>
          <type>char *</type>
          <declname>str</declname>
        </param>
        <param>
          <type>int</type>
          <declname>base</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" line="56" column="1" bodyfile="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h" bodystart="1296" bodyend="1340"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#ifndef<sp/>ARGPROCESSOR_JARSCONTROL_JARSCONTROL_H_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ARGPROCESSOR_JARSCONTROL_JARSCONTROL_H_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="RdpToolsBeta_8h" kindref="compound">RdpToolsBeta/RdpToolsBeta.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">//************************#include<sp/>&quot;arriba/\&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;iostream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;pthread.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;unistd.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;zmq.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/><sp/>&lt;vector&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdint.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;assert.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;bits/stdc++.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sys/socket.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;netinet/in.h&gt;</highlight><highlight class="comment">//define<sp/>las<sp/>estructuras<sp/>:<sp/>struct<sp/>sockaddr_in,<sp/>struct<sp/>in_addr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;arpa/inet.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;netdb.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="comment">//*******************************<sp/>librerías<sp/>para<sp/>socket<sp/>UDP<sp/>bind<sp/>****************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gnuradio/math.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gnuradio/prefs.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdexcept&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;errno.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;boost/asio.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;boost/format.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gnuradio/thread/thread.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">//********************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="comment">//************************************Structura<sp/>fpga_con_t<sp/>*******************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="comment">//boost::asio::ip::udp::endpoint<sp/>local_endpoint;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" refkind="member"><highlight class="normal">boost::asio::ip::udp::socket*<sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref>;</highlight></codeline>
<codeline lineno="42" refid="JarsControl_8h_1aa6e78a1fa6723425d76b1aae3928fc9b" refkind="member"><highlight class="normal">boost::asio::io_service<sp/><ref refid="JarsControl_8h_1aa6e78a1fa6723425d76b1aae3928fc9b" kindref="member">local_io_service</ref>;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="JarsControl_8h_1acc668b68847453065b3681978e25f217" refkind="member"><highlight class="normal">boost::asio::ip::udp::endpoint<sp/><ref refid="JarsControl_8h_1acc668b68847453065b3681978e25f217" kindref="member">destino_endpoint</ref>;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1ab2dd9706c8afee0101f9fb673f23a9e1" kindref="member">fpga_con_init</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>host,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>lport);</highlight></codeline>
<codeline lineno="47"><highlight class="normal">ssize_t<sp/><ref refid="JarsControl_8h_1a8ec1b8a8eeca1b70875f6a4c037dc3e1" kindref="member">fpga_con_send</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buf,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>len<sp/>);</highlight></codeline>
<codeline lineno="48"><highlight class="normal">ssize_t<sp/><ref refid="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" kindref="member">fpga_con_recv</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*dbuf,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>dsize<sp/>);</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1ae3793cb02de7605c651d1762415629f8" kindref="member">IPstr_to_bytearray</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*IPstr,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*parts);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a9fe1a038e1882c74961f61186cc7a811" kindref="member">MACstr_to_bytearray</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*MACstr,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*parts);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>number,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*arrayOfByte,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a0a6858dd58a8b8b154e5dd149fafd01d" kindref="member">bytearray_to_IPstr</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*bytes,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*IPstr);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a19a52ae0d3c91c019542bc76a720aef9" kindref="member">bytearray_to_int</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*byte_array,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a186f7c0fc2f44b39853cd79d8daa6b65" kindref="member">bytearray_to_MACstr</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*bytes,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*MACstr);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/><ref refid="JarsControl_8h_1a44ec176a02a62ada468ebde1b3f6e9f0" kindref="member">itoa</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>str,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>base);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="comment">//*****************************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="comment">//******************************<sp/>Clase<sp/>SP601_command<sp/>********************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="JarsControl_8h_1ae6cae658beb94f4ddfcaa58ee33dd38b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>RCV_BUFSIZE<sp/>1472</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62" refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a578a2dc0f32dacf50c510f7009c12d1f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152" kindref="member">JARS_CMD</ref><sp/>{<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a7316843e88740cd819c6427a7f833df6" kindref="member">NOOP</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abff6b2d1371663911c20d04738892bfd" kindref="member">SET_SP601_IP</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a578a2dc0f32dacf50c510f7009c12d1f" kindref="member">SET_SP601_PORT</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a9dd105b07676790bd963c49f607588b9" kindref="member">GET_SP601_MAC</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abd7b2f700ca4ef2b11180557059e6bbd" kindref="member">SET_COMMS_IP</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a57446329e1b880f1e79096d89ca90abf" kindref="member">SET_COMMS_PORT</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152aedb06bfaf37d18638b99cabc860b5c4b" kindref="member">SET_COMMS_MAC</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152af2fb94d1fd1739ad68220e57882efa23" kindref="member">GET_VALUE</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a55636b09cf88b31facd828042757e8cd" kindref="member">DATA_LOOPS</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a977ee7b118a6816596e05f1c5c6221f2" kindref="member">CHECK_ACK</ref>,<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a28b6b130f7a5b8cdbee96bb17ef151af" kindref="member">SEND_FILTER</ref>};</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="structaddress" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structaddress" kindref="compound">address</ref>{</highlight></codeline>
<codeline lineno="65" refid="structaddress_1a581926a36870deaba867743219d89d9a" refkind="member"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/><ref refid="structaddress_1a581926a36870deaba867743219d89d9a" kindref="member">d_path_file</ref>;</highlight></codeline>
<codeline lineno="66" refid="structaddress_1a47c83523d9cc06ed386f29e5fcd5eeda" refkind="member"><highlight class="normal"><sp/><sp/><sp/>std::string<sp/><ref refid="structaddress_1a47c83523d9cc06ed386f29e5fcd5eeda" kindref="member">d_mac_block</ref>;</highlight></codeline>
<codeline lineno="67" refid="structaddress_1aeeeea32d04a247d4a5351e33af8674a8" refkind="member"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structaddress_1aeeeea32d04a247d4a5351e33af8674a8" kindref="member">d_port_block</ref>;</highlight></codeline>
<codeline lineno="68" refid="structaddress_1aacbeb5a1db9cfa6bcabb47d819818b1e" refkind="member"><highlight class="normal"><sp/><sp/><sp/>std::string<sp/><ref refid="structaddress_1aacbeb5a1db9cfa6bcabb47d819818b1e" kindref="member">d_ip_host</ref>;</highlight></codeline>
<codeline lineno="69"><highlight class="normal">};</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Se<sp/>utilizan<sp/>las<sp/>definiciones<sp/>de<sp/>comandos<sp/>del<sp/>archivo<sp/>ExperimentConstants.h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72" refid="JarsControl_8h_1a1aa9678f48f9b9661062c9246e64993a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RST_CTRL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x05</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73" refid="JarsControl_8h_1a52e278dd9e601652e8ab11b70c53ef6e" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MODE_OPER<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x03</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74" refid="JarsControl_8h_1ab8923675701bbbb7f51c4e68fac5e588" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ELECTION_RXD<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x04</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75" refid="JarsControl_8h_1a063240a0c681e13158e249f55ac4b750" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>POWER_RXD<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x06</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76" refid="JarsControl_8h_1aefde68a634d66b7039aa56de3fd5301b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PROG_RXD<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x09</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77" refid="JarsControl_8h_1ad7e5e3b2ac85d92fe9b81bac2368ca02" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ENABLE_TRANSF<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x0A</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78" refid="JarsControl_8h_1aacac2365f297d20c92dac6c32a87c6a3" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DISABLE_TRANSF<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x0B</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="comment">//Declara<sp/>la<sp/>estructura<sp/>jars_cmd:<sp/>{&quot;NOOP&quot;,0,0,false}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="structjars__cmd" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structjars__cmd" kindref="compound">jars_cmd</ref>{</highlight></codeline>
<codeline lineno="82" refid="structjars__cmd_1ac1538c1c69d889eefbabfc077e59d96f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="structjars__cmd_1ac1538c1c69d889eefbabfc077e59d96f" kindref="member">name</ref>;</highlight></codeline>
<codeline lineno="83" refid="structjars__cmd_1a08d03301fdc843da88b71ab8d5576a97" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="structjars__cmd_1a08d03301fdc843da88b71ab8d5576a97" kindref="member">val</ref>;</highlight></codeline>
<codeline lineno="84" refid="structjars__cmd_1a2ac9bbc25760e1a29a170271d68ea390" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="structjars__cmd_1a2ac9bbc25760e1a29a170271d68ea390" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="85" refid="structjars__cmd_1a667569fb6dd6e6bc0b0699d0e1a49b22" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="structjars__cmd_1a667569fb6dd6e6bc0b0699d0e1a49b22" kindref="member">ack</ref>;</highlight></codeline>
<codeline lineno="86"><highlight class="normal">};</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="classsp601__command" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsp601__command" kindref="compound">sp601_command</ref></highlight></codeline>
<codeline lineno="90"><highlight class="normal">{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classsp601__command" kindref="compound">sp601_command</ref>();</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>~<ref refid="classsp601__command" kindref="compound">sp601_command</ref>();</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>init(<ref refid="structaddress" kindref="compound">address</ref><sp/>host_address);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ssize_t<sp/>receive(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buffer_rcv);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>send(uint8_t<sp/>cmd,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>code,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*payload,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload);</highlight></codeline>
<codeline lineno="97"><highlight class="normal">};</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight><highlight class="comment">//*********************************<sp/>Clase<sp/>_JARSControl<sp/>*********************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight><highlight class="comment">//**************************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="class__JARSControl" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="class__JARSControl" kindref="compound">_JARSControl</ref></highlight></codeline>
<codeline lineno="103"><highlight class="normal">{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="keyword">protected</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>InternalRcv();</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>InternalThreadEntry();</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>InternalCallback();</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**********************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class__JARSControl" kindref="compound">_JARSControl</ref>();</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>~<ref refid="class__JARSControl" kindref="compound">_JARSControl</ref>();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Parameters<sp/>of<sp/>Experiment<sp/>(luego<sp/>pasar<sp/>a<sp/>AcquisitionManager.h)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classExpParameters" kindref="compound">ExpParameters</ref>*<sp/><ref refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" kindref="member">MyExpParam</ref>;</highlight></codeline>
<codeline lineno="117" refid="class__JARSControl_1a23d97fafb2a8484a913c9ae0cbf96b53" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a23d97fafb2a8484a913c9ae0cbf96b53" kindref="member">m_SizeofBuffer</ref>;</highlight><highlight class="comment">//adquiere<sp/>el<sp/>valor<sp/>del<sp/>tamaño<sp/>del<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="class__JARSControl_1af22ac24cb398de0720ab962d79a8498f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/><ref refid="class__JARSControl_1af22ac24cb398de0720ab962d79a8498f" kindref="member">m_AcqBuffer</ref>;</highlight><highlight class="comment">//arreglo<sp/>del<sp/>buffer<sp/>que<sp/>guardará<sp/>la<sp/>data<sp/>obtenida<sp/>dependiendo<sp/>si<sp/>es<sp/>short<sp/>or<sp/>float<sp/>en<sp/>tipo<sp/>16sc</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Pointer<sp/>to<sp/>client<sp/>function<sp/>in<sp/>order<sp/>to<sp/>get<sp/>advised<sp/>when<sp/>interrupt<sp/>came</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120" refid="class__JARSControl_1a83109c7d938a17dcd5344b8984489490" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>void<sp/>(*ptrFunc)(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>success);</highlight><highlight class="comment">//_AcquisitionManager//toma<sp/>el<sp/>valor<sp/>de<sp/>ptrClientFunc<sp/>asignado<sp/>en<sp/>jro_AssignMemory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Function<sp/>that<sp/>receives<sp/>a<sp/>pointer<sp/>from<sp/>ExperimentParameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>jro_MatchParameters(<ref refid="classExpParameters" kindref="compound">ExpParameters</ref>*<sp/>ExpParam);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>jro_AssignMemory(<ref refid="classMemoryManager" kindref="compound">MemoryManager</ref>*<sp/>MemManager,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>(*ptrClientFunc)(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>sucess),<ref refid="structaddress" kindref="compound">address</ref><sp/>host_address);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>jro_InitAcquisition();</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>jro_StopAcquisition();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>InternalRcvFunc(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>This);</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>InternalThreadEntryFunc(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>This);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>InternalCallbackFunc(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>This);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Instanciacion<sp/>de<sp/>sp601_command</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classsp601__command" kindref="compound">sp601_command</ref>*<sp/>MySP601;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_t<sp/>_thread_rcv;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thread<sp/>for<sp/>acquire<sp/>UDP<sp/>packets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_t<sp/>_thread_jars;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thread<sp/>for<sp/>acquire<sp/>UDP<sp/>packets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_t<sp/>_thread_jars_rcv;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thread<sp/>for<sp/>acquire<sp/>UDP<sp/>packets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_t<sp/>_thread_config;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thread<sp/>for<sp/>acquire<sp/>UDP<sp/>packets</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>VarSetSystem;</highlight><highlight class="comment">//valor<sp/>tomado<sp/>si<sp/>está<sp/>mal<sp/>seteado</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int16_t<sp/>m_nChannelsMask;<sp/></highlight><highlight class="comment">//variable<sp/>q<sp/>contiene<sp/>la<sp/>mascara<sp/>de<sp/>canales<sp/>adquirir</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int16_t<sp/>m_nCardsMask;<sp/></highlight><highlight class="comment">//variable<sp/>q<sp/>contiene<sp/>la<sp/>mascara<sp/>de<sp/>programacion<sp/>de<sp/>tarjetas<sp/>conectadas</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>m_nFilterCoeff[2047];<sp/></highlight><highlight class="comment">//<sp/>arreglo<sp/>donde<sp/>se<sp/>guardan<sp/>los<sp/>coefficientes<sp/>del<sp/>filtro</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><sp/><sp/><sp/>m_nCountCoeff;<sp/></highlight><highlight class="comment">//<sp/>contador<sp/>de<sp/>coeficientes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Number<sp/>of<sp/>Marks,<sp/>el<sp/>valor<sp/>para<sp/>el<sp/>JARS<sp/>es<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>m_NumMarks;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mark<sp/>in<sp/>Data<sp/>Real</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>m_MarkRe;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Pointer<sp/>to<sp/>Acquired<sp/>Buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>m_AcqNIBuffer;</highlight><highlight class="comment">//buffer<sp/>más<sp/>grande<sp/>separado<sp/>en<sp/>memoria</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Pointer<sp/>to<sp/>double<sp/>memory<sp/>used<sp/>for<sp/>Traditional<sp/>NIDAQ</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>m_AcqNIDoubleBuffer;</highlight><highlight class="comment">//doble<sp/>buffer<sp/>más<sp/>grande<sp/>separado<sp/>en<sp/>memoria</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Payload<sp/>to<sp/>send<sp/>jars<sp/>command</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16];</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>RemoveMark();<sp/></highlight><highlight class="comment">//Fx<sp/>to<sp/>remove<sp/>marks<sp/>in<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>RESET_CTRL_COMMAND();</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>MODE_OPER_COMMAND();</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>SELECT_RXD_COMMAND();<sp/></highlight><highlight class="comment">//enviado<sp/>pero<sp/>no<sp/>procesado.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>PW_RXD_COMMAND();</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>PROG_RXD_COMMAND();</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>HAB_TRANS_COMMAND();</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>DESHAB_TRANS_COMMAND();</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>LoadMask();<sp/></highlight><highlight class="comment">//<sp/>Fx<sp/>q<sp/>carga<sp/>la<sp/>máscara<sp/>de<sp/>programación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ConfigDataTransfer();<sp/></highlight><highlight class="comment">//<sp/>Fx<sp/>q<sp/>envia<sp/>la<sp/>cantidad<sp/>de<sp/>muestras<sp/>del<sp/>perfil<sp/>y<sp/>NTX<sp/>que<sp/>se<sp/>debe<sp/>adquirir</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>SetSystem(<ref refid="structaddress" kindref="compound">address</ref><sp/>host_address);<sp/></highlight><highlight class="comment">//<sp/>Funcion<sp/>encargada<sp/>de<sp/>dejar<sp/>listo<sp/>el<sp/>sistema<sp/>para<sp/>adquisicion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>LoadFilter();<sp/></highlight><highlight class="comment">//<sp/>Fx<sp/>q<sp/>carga<sp/>la<sp/>los<sp/>coefcicientes<sp/>del<sp/>filtro</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>WriteFilter();<sp/></highlight><highlight class="comment">//<sp/>Fx<sp/>q<sp/>escribe<sp/>la<sp/>los<sp/>coefcicientes<sp/>del<sp/>filtro</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal">};</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight><highlight class="comment">//*************************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175" refid="JarsControl_8h_1ab25fcf174daff72a94fd8a69424c6a2e" refkind="member"><highlight class="normal"><ref refid="class__JARSControl" kindref="compound">_JARSControl</ref><sp/><ref refid="JarsControl_8h_1ab25fcf174daff72a94fd8a69424c6a2e" kindref="member">JARSControl</ref>;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight><highlight class="comment">//*************************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight><highlight class="comment">//********************************Clase<sp/>sp601_config<sp/>**********************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="179" refid="classsp601__config" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsp601__config" kindref="compound">sp601_config</ref></highlight></codeline>
<codeline lineno="180"><highlight class="normal">{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183" refid="classsp601__config_1a8425fde699cfd9476b57621d6ef53129" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="classsp601__config_1a8425fde699cfd9476b57621d6ef53129" kindref="member">SP601_MAC</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>Must<sp/>convert<sp/>to<sp/>hex<sp/>if<sp/>used//Espacio<sp/>de<sp/>memoria<sp/>donde<sp/>se<sp/>guarda<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>MAC<sp/>del<sp/>SP601<sp/>+<sp/>null</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184" refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" kindref="member">SP601_IP</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Defined<sp/>in<sp/>Xilnx<sp/>ISE<sp/>ethernet_control.v//Espacio<sp/>de<sp/>memoria<sp/>donde<sp/>se<sp/>guarda<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>IP<sp/>del<sp/>SP601<sp/>+<sp/>null</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185" refid="classsp601__config_1af3c1756c00b9954a476698c62911feb7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classsp601__config_1af3c1756c00b9954a476698c62911feb7" kindref="member">SP601_PORT</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Defined<sp/>in<sp/>Xilnx<sp/>ISE<sp/>ethernet_control.v//Espacio<sp/>de<sp/>memoria<sp/>donde<sp/>se<sp/>guarda<sp/>el<sp/>valor<sp/>del<sp/>puerto<sp/>del<sp/>SP601<sp/>+<sp/>null</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186" refid="classsp601__config_1a67d08111f19266ac84a3781d1c204b6e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classsp601__config_1a67d08111f19266ac84a3781d1c204b6e" kindref="member">sp601_ip_string</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>IP<sp/>del<sp/>SP601<sp/>usado<sp/>cuando<sp/>definimos<sp/>un<sp/>endpoint<sp/>tipo<sp/>boost.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187" refid="classsp601__config_1a5f4214fdc2d5b4cc6cf2665ad6233838" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="classsp601__config_1a5f4214fdc2d5b4cc6cf2665ad6233838" kindref="member">IP_host</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Se<sp/>usará<sp/>para<sp/>mostrar<sp/>info<sp/>de<sp/>la<sp/>IP<sp/>switch-send</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188" refid="classsp601__config_1a2c2cf407fda2eff4bfb66c2624105c7f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="classsp601__config_1a2c2cf407fda2eff4bfb66c2624105c7f" kindref="member">MAC_host</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Se<sp/>usará<sp/>para<sp/>mostrar<sp/>info<sp/>del<sp/>MAC<sp/>en<sp/>switch-send</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189" refid="classsp601__config_1aa8d75acd776756f7b46560c340a4817d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classsp601__config_1aa8d75acd776756f7b46560c340a4817d" kindref="member">PORT_host</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Se<sp/>usará<sp/>para<sp/>mostrar<sp/>info<sp/>del<sp/>puerto<sp/>en<sp/>switch-send</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191" refid="classsp601__config_1a26dac3fc752ef1cac9c9a9f6f05782b0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>REPLY_START_DATA_PAYLOAD[2];<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AB,<sp/>defined<sp/>in<sp/>DEFAULT_START_DATA_PAYLOAD<sp/>(ethernet_control.v)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192" refid="classsp601__config_1a232a589f07ec9b53c41f53954fc2acac" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="classsp601__config_1a232a589f07ec9b53c41f53954fc2acac" kindref="member">UDP_timeout</ref>;</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194" refid="classsp601__config_1a6d8f61af0597bc1c6ca208898fc76f77" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classsp601__config_1a6d8f61af0597bc1c6ca208898fc76f77" kindref="member">VERBOSE_MODE</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Atributo<sp/>de<sp/>sp601_config</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classsp601__config" kindref="compound">sp601_config</ref>();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Declara<sp/>un<sp/>constructor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal">};</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight><highlight class="comment">//***************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200" refid="JarsControl_8h_1ac35468256656a04613e24a7e08d81167" refkind="member"><highlight class="normal"><ref refid="classsp601__config" kindref="compound">sp601_config</ref><sp/><ref refid="JarsControl_8h_1ac35468256656a04613e24a7e08d81167" kindref="member">cfg</ref>;</highlight><highlight class="comment">//<sp/>objeto<sp/>de<sp/>sp601_config</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight><highlight class="comment">//*****************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight><highlight class="comment">//********************************************************************************************************************<sp/><sp/>^</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight><highlight class="comment">//*******************************************<sp/>Declara<sp/>clases<sp/>-----------------------------------------------------------|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight><highlight class="comment">//*******************************************<sp/>Define<sp/>clases<sp/><sp/>-----------------------------------------------------------|</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight><highlight class="comment">//********************************************************************************************************************<sp/><sp/>v</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight><highlight class="comment">//*******************************************<sp/>Define<sp/>la<sp/>clase<sp/>sp601_config<sp/>*******************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight><highlight class="comment">//Constructor<sp/>de<sp/>sp601_config</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight><highlight class="comment">//****************************<sp/>Establece<sp/>los<sp/>parámetros<sp/>de<sp/>RED<sp/>******************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214" refid="classsp601__config_1a0f455ea81940b646c26beefe54ce475a" refkind="member"><highlight class="normal"><ref refid="classsp601__config_1a0f455ea81940b646c26beefe54ce475a" kindref="member">sp601_config::sp601_config</ref>()</highlight></codeline>
<codeline lineno="215"><highlight class="normal">{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//************************<sp/>Define<sp/>values<sp/>for<sp/>network<sp/>parameters<sp/>********************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//IP,MAC,puerto<sp/>del<sp/>sp601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>sp601_ip[]<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;192.168.1.6&quot;</highlight><highlight class="normal">;</highlight><highlight class="comment">//&quot;Para<sp/>el<sp/>ROJ:10.10.30.123&quot;;//localizador<sp/>de<sp/>mi<sp/>host<sp/>en<sp/>la<sp/>red</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>sp601_mac[]<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;30:9c:23:d0:1b:ca&quot;</highlight><highlight class="normal">;</highlight><highlight class="comment">//Para<sp/>el<sp/>ROJ:<sp/>&quot;00:0a:35:02:05:f2&quot;;//dirección<sp/>única<sp/>MAC,<sp/>que<sp/>identifica<sp/>un<sp/>elemento<sp/>de<sp/>la<sp/>capa<sp/>de<sp/>enlace<sp/>de<sp/>datos(tarjeta<sp/><sp/><sp/><sp/><sp/>de<sp/>red)//Se<sp/>establece<sp/>en<sp/>el<sp/>main</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sp601_port<sp/>=<sp/>9097;<sp/></highlight><highlight class="comment">//Para<sp/>el<sp/>ROJ:<sp/>52428;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//IP<sp/>y<sp/>puerto<sp/>del<sp/>sp601<sp/>en<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>sp601_ip_string<sp/>=<sp/>string(sp601_ip);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//IP,MAC,puerto<sp/>de<sp/>la<sp/>tarjeta<sp/>de<sp/>red<sp/>serán<sp/>dados<sp/>por<sp/>el<sp/>bloque</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//****Guarda<sp/>los<sp/>valores<sp/>de<sp/>la<sp/>red<sp/>establecidos<sp/>en<sp/>memoria<sp/>con<sp/>su<sp/>null<sp/>(ya<sp/>que<sp/>estamos<sp/>en<sp/>size_t<sp/>correctito)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//Guarda<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>ip<sp/>del<sp/>sp601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/>SP601_IP=(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)malloc(strlen(sp601_ip)+1);</highlight><highlight class="comment">//toma<sp/>el<sp/>término<sp/>null<sp/>caracter<sp/>(string<sp/>literal)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/>memcpy(SP601_IP,sp601_ip,strlen(sp601_ip)+1);</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//Guarda<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>mac<sp/>del<sp/>sp601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/>SP601_MAC=(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)malloc(strlen(sp601_mac)+1);</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/>memcpy(SP601_MAC,sp601_mac,strlen(sp601_mac)+1);</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//el<sp/>valor<sp/>del<sp/>puerto<sp/>de<sp/>la<sp/>sp601<sp/>es<sp/>guardado<sp/>en<sp/>SP601_PORT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/>SP601_PORT<sp/>=<sp/>sp601_port;</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//Establece<sp/>los<sp/>parámetros<sp/>de<sp/>UDP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/>UDP_timeout<sp/>=<sp/>100;</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/>VERBOSE_MODE<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="239"><highlight class="normal">}</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight><highlight class="comment">//*********************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight><highlight class="comment">//*******************************************<sp/>Define<sp/>la<sp/>clase<sp/>JARSControl<sp/>*********************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243" refid="class__JARSControl_1a8a5f2a09daffa77a92e351be46f607a2" refkind="member"><highlight class="normal"><ref refid="class__JARSControl_1a8a5f2a09daffa77a92e351be46f607a2" kindref="member">_JARSControl::_JARSControl</ref>()</highlight></codeline>
<codeline lineno="244"><highlight class="normal">{</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_NumMarks=2;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//2<sp/>elementos<sp/>de<sp/>la<sp/>cabecera<sp/>por<sp/>eliminar</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_MarkRe=-21846;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//marca<sp/>para<sp/>comprobar<sp/>la<sp/>cabecera<sp/>del<sp/>JARS<sp/>2.0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_SizeofBuffer=0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>se<sp/>igualará<sp/>a<sp/>m_iSizeNIBuffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_AcqNIBuffer=NULL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Doble<sp/>Buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_AcqNIDoubleBuffer=NULL;<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Doble<sp/>Buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_AcqBuffer=NULL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Buffer<sp/>de<sp/>adquisición</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_nChannelsMask=0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>los<sp/>canales<sp/>a<sp/>energizar<sp/>y<sp/>adquirir</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_nCardsMask=0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Se<sp/>envía<sp/>al<sp/>JARS<sp/>pero<sp/>no<sp/>definen<sp/>canales<sp/>físicos.Se<sp/>usó<sp/>para<sp/>simular<sp/>canales</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>VarSetSystem=0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//valor<sp/>tomado<sp/>para<sp/>ver<sp/>el<sp/>estado<sp/>de<sp/>seteado</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classsp601__command" kindref="compound">sp601_command</ref>();<sp/></highlight><highlight class="comment">//Crea<sp/>un<sp/>objeto<sp/>de<sp/>la<sp/>clase<sp/>sp601_command.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal">}</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258" refid="class__JARSControl_1a3373fa4a920c76cf6d66d1668d7b389c" refkind="member"><highlight class="normal"><ref refid="class__JARSControl_1a3373fa4a920c76cf6d66d1668d7b389c" kindref="member">_JARSControl::~_JARSControl</ref>()</highlight></codeline>
<codeline lineno="259"><highlight class="normal">{</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/>JARSControl.<ref refid="class__JARSControl_1a3a32dd8bf71407e2657267980476ca50" kindref="member">jro_StopAcquisition</ref>();</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Terminating<sp/>program...\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/>sleep(1);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/>exit(1);</highlight><highlight class="comment">//termina<sp/>el<sp/>proceso</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal">}</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight><highlight class="comment">//Define<sp/>los<sp/>parámetros<sp/>del<sp/>experimento<sp/>(MyExpParam)<sp/>con<sp/>el<sp/>parámetro<sp/>ExpParam<sp/>introducido<sp/>en<sp/>jro_MatchParameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight><highlight class="comment">//Define<sp/>MyExpParam<sp/>para<sp/>un<sp/>objeto<sp/>de<sp/>la<sp/>clase<sp/>_JARSControl.<sp/>Este<sp/>objeto<sp/>se<sp/>usará<sp/>para<sp/>sincronizar<sp/>la<sp/>data<sp/>en<sp/>tiempo<sp/>real</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight><highlight class="comment">//entre<sp/>threads.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="269" refid="class__JARSControl_1a6627542a7073fc2a460bc8b5b380f937" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a6627542a7073fc2a460bc8b5b380f937" kindref="member">_JARSControl::jro_MatchParameters</ref>(<ref refid="classExpParameters" kindref="compound">ExpParameters</ref>*<sp/>ExpParam)</highlight></codeline>
<codeline lineno="270"><highlight class="normal">{</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MyExpParam=ExpParam;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Usado<sp/>en<sp/>ConfigDataTransfer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.<ref refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" kindref="member">MyExpParam</ref>=ExpParam;<sp/></highlight><highlight class="comment">//<sp/>agregado<sp/>para<sp/>q<sp/>actualice<sp/>campo<sp/>MyExpParam<sp/>de<sp/>JARSControl</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="275"><highlight class="normal">}</highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight><highlight class="comment">//Llamará<sp/>a<sp/>los<sp/>buffers<sp/>de<sp/>adquisición,<sp/>doble<sp/>buffers<sp/>,<sp/>al<sp/>puntero<sp/>de<sp/>la<sp/>función<sp/>que<sp/>comenzará<sp/>el<sp/>almacenamiento<sp/>en<sp/>disco</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight><highlight class="comment">//y<sp/>establecerá<sp/>el<sp/>sistema<sp/>con<sp/>SetSystem</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279" refid="class__JARSControl_1a1dc4dd8d70448789ea8df65ee92eae82" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a1dc4dd8d70448789ea8df65ee92eae82" kindref="member">_JARSControl::jro_AssignMemory</ref>(<ref refid="classMemoryManager" kindref="compound">MemoryManager</ref>*<sp/>MemManager,</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>(*ptrClientFunc)(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>sucess),<ref refid="structaddress" kindref="compound">address</ref><sp/>host_address)</highlight></codeline>
<codeline lineno="280"><highlight class="normal">{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Asigna<sp/>los<sp/>buffer<sp/>de<sp/>adquisición<sp/>y<sp/>memoria</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_SizeofBuffer=MemManager-&gt;<ref refid="classMemoryManager_1acdf947edccf307a07382da6ee435d214" kindref="member">m_iSizeNIBuffer</ref>;</highlight><highlight class="comment">//tamaño<sp/>del<sp/>buffer<sp/>más<sp/>grande<sp/>(sin<sp/>integraciones)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_AcqBuffer=MemManager-&gt;<ref refid="classMemoryManager_1a1ddfeb3818503fad3b94d8b0fdb1a1fd" kindref="member">m_mAcqBuffer</ref>[0];</highlight><highlight class="comment">//buffer<sp/>de<sp/>adquisición</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_AcqNIBuffer=MemManager-&gt;<ref refid="classMemoryManager_1af53d94ce1836a26f87969064c38900a2" kindref="member">m_nNIBuffer</ref>;</highlight><highlight class="comment">//buffer<sp/>más<sp/>grande<sp/>separado<sp/>en<sp/>memoria<sp/>//buffer<sp/>para<sp/>threads</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_AcqNIDoubleBuffer=MemManager-&gt;<ref refid="classMemoryManager_1a06e03642b89e7f6aa2745efa87e8af7f" kindref="member">m_nNIDoubleBuffer</ref>;</highlight><highlight class="comment">//doble<sp/>buffer<sp/>más<sp/>grande<sp/>separado<sp/>en<sp/>memoria//buffer<sp/>para<sp/>threads</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrFunc=ptrClientFunc;</highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!SetSystem(host_address))</highlight><highlight class="comment">//si<sp/>es<sp/>seteado<sp/>correctamente,<sp/>regresa<sp/>true//Se<sp/>puede<sp/>llamar<sp/>a<sp/>métodos<sp/>que<sp/>pertenecen<sp/>a<sp/>la<sp/>misma<sp/>clase<sp/>dentro<sp/>de<sp/>otros<sp/>métodos</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>VarSetSystem=1;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(100000);<sp/></highlight><highlight class="comment">//microsegundos</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="291"><highlight class="normal">}</highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight><highlight class="comment">//******<sp/>Define<sp/>el<sp/>socket<sp/>y<sp/>establece<sp/>las<sp/>direcciones<sp/>de<sp/>puertos<sp/>********************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight><highlight class="comment">//******<sp/>Establece<sp/>las<sp/>máscaras<sp/>(tarjeta<sp/>y<sp/>canales)<sp/>y<sp/>el<sp/>filtro***************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight><highlight class="comment">//******<sp/>Envía<sp/>los<sp/>comandos<sp/>de<sp/>configuración<sp/>del<sp/>JARS:RESET,MODE_OPER,SELECT_RXD,PW_RXD,PROG_RXD,WRT_FILT*******</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight><highlight class="comment">//****<sp/>Nos<sp/>dice<sp/>si<sp/>el<sp/>seteado<sp/>del<sp/>sistema<sp/>se<sp/>realizó<sp/>correctamente<sp/>devolviendo<sp/>un<sp/>true<sp/>***********</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::SetSystem(<ref refid="structaddress" kindref="compound">address</ref><sp/>host_address)</highlight></codeline>
<codeline lineno="298"><highlight class="normal">{</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//--------------<sp/>Define<sp/>el<sp/>socket<sp/>y<sp/>Establece<sp/>las<sp/>direcciones<sp/>de<sp/>puertos<sp/>-------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//--------------<sp/>Definiremos<sp/>sockets<sp/>UDP<sp/>de<sp/>GNU<sp/>Radio<sp/>--------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;init(host_address);</highlight><highlight class="comment">//<sp/>Inicializar<sp/>parametros<sp/>para<sp/>comunicacion<sp/>con<sp/>tarjeta<sp/>SP601<sp/>(tarjeta<sp/>de<sp/>bus)(nvia<sp/>los<sp/>puetos<sp/>de<sp/>la<sp/>Pc<sp/>y<sp/>la<sp/>SP601<sp/>a<sp/>la<sp/>SP601)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//---------Detecta<sp/>si<sp/>las<sp/>máscaras<sp/>utilizadas<sp/>por<sp/>el<sp/>objeto<sp/>JARSControl<sp/>fueron<sp/>definidas----------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//---------Define<sp/>parte<sp/>del<sp/>paquete<sp/>(máscara)<sp/>que<sp/>será<sp/>enviado<sp/>para<sp/>encender<sp/>y<sp/>seleccionar<sp/>los<sp/>canales<sp/>de<sp/>adquisición.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.LoadMask())<sp/></highlight><highlight class="comment">//<sp/>Lee<sp/>la<sp/>máscara<sp/>de<sp/>programacion<sp/>del<sp/>*.racp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight><highlight class="comment">//suspende<sp/>la<sp/>ejecución<sp/>por<sp/>50<sp/>seg.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------Utiliza<sp/>el<sp/>.jars<sp/>para<sp/>establecer<sp/>las<sp/>direcciones<sp/>del<sp/>filtro---------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.LoadFilter())<sp/></highlight><highlight class="comment">//<sp/>Carga<sp/>el<sp/>archivo<sp/>del<sp/>filtro<sp/>y<sp/>define<sp/>los<sp/>valores<sp/>para<sp/>el<sp/>AD6620</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-----------<sp/>Envía<sp/>un<sp/>comando<sp/>para<sp/>resetear<sp/>el<sp/>JARS<sp/>------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.RESET_CTRL_COMMAND())<sp/></highlight><highlight class="comment">//<sp/>Resetea<sp/>el<sp/>sistema,<sp/>reinicia<sp/>todos<sp/>los<sp/>FPGA&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------<sp/>if<sp/>GENERATE<sp/>OWN<sp/>SAMPLING<sp/>WINDOW=YES<sp/>del<sp/>.racp----------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(MyExpParam-&gt;<ref refid="classExpParameters_1a749ba5fb272f835591296dae9bcccd53" kindref="member">OwnWindow</ref>)</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.MODE_OPER_COMMAND())</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-------------<sp/>Envía<sp/>el<sp/>comando<sp/>ELECTION_RXD<sp/>al<sp/>JARS<sp/>-----------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.SELECT_RXD_COMMAND())</highlight><highlight class="comment">//selecciona<sp/>las<sp/>tarjetas<sp/>de<sp/>adquisición//usado<sp/>para<sp/>simular<sp/>,<sp/>no<sp/>procesado</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-------------<sp/>Envía<sp/>el<sp/>comando<sp/>POWER_RXD<sp/>al<sp/>JARS<sp/>-----------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Enciende<sp/>las<sp/>tarjetas<sp/>de<sp/>adquisición<sp/>y<sp/>envia<sp/>las<sp/>máscaras<sp/>de<sp/>los<sp/>canales</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.PW_RXD_COMMAND())<sp/></highlight><highlight class="comment">//<sp/>Alimenta<sp/>los<sp/>receptores<sp/>digitales<sp/>y<sp/>envia<sp/>la<sp/>mascara<sp/>de<sp/>los<sp/>canales<sp/>seleccionados</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-------------<sp/>Envía<sp/>el<sp/>comando<sp/>PROG_RXD<sp/>al<sp/>JARS<sp/>-----------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.PROG_RXD_COMMAND())<sp/></highlight><highlight class="comment">//<sp/>Envía<sp/>el<sp/>comando<sp/>que<sp/>permitirá<sp/>programar<sp/>el<sp/>DSP<sp/>AD6620</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-------------<sp/>Relacionado<sp/>con<sp/>filter<sp/>-----------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.WriteFilter())<sp/></highlight><highlight class="comment">//<sp/>Envía<sp/>a<sp/>través<sp/>del<sp/>puerto<sp/>de<sp/>datos<sp/>los<sp/>coeficientes<sp/>del<sp/>filtro</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="338"><highlight class="normal">}</highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"></highlight><highlight class="comment">//*******<sp/>Define<sp/>las<sp/>máscaras<sp/>de<sp/>las<sp/>tarjetas<sp/>conectadas<sp/>y<sp/>los<sp/>canales<sp/>seleccionados<sp/>********************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight><highlight class="comment">//*******<sp/>Define<sp/>parte<sp/>del<sp/>paquete<sp/>que<sp/>será<sp/>enviado<sp/>para<sp/>encender<sp/>y<sp/>seleccionar<sp/>los<sp/>canales<sp/>de<sp/>adquisición.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight><highlight class="comment">//JARSControl.m_nChannelsMask:<sp/>define<sp/>los<sp/>canales<sp/>a<sp/>energizar<sp/>y<sp/>adquirir</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight><highlight class="comment">//JARSControl.m_nCardsMask:<sp/>se<sp/>envía<sp/>al<sp/>JARS<sp/>pero<sp/>no<sp/>definen<sp/>canales<sp/>físicos.Se<sp/>usó<sp/>para<sp/>simular<sp/>canales</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::LoadMask()</highlight></codeline>
<codeline lineno="345"><highlight class="normal">{</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------------(Carga<sp/>de<sp/>máscara<sp/>de<sp/>tarjetas<sp/>conectadas)<sp/>Para<sp/>simular<sp/><sp/><sp/>--------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//****************m_nCardsMask=<sp/>11<sp/>elementos<sp/>:<sp/>ceros<sp/>=<sp/>(#<sp/>tarjetas-1),<sp/>unos<sp/>=<sp/>11-<sp/>#<sp/>ceros<sp/>*******************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(uint8_t<sp/>i=0;<sp/>i&lt;MyExpParam-&gt;<ref refid="classExpParameters_1a6f9185d4fae1038b1bf6672cd5937eef" kindref="member">MyGPParam</ref>.<ref refid="struct__GlobPParam_1a4e4bde5e3d036d9e786677cb2000d74a" kindref="member">m_nCards</ref>;<sp/>i++)</highlight><highlight class="comment">//uint8_t<sp/>=<sp/>unsigned<sp/>char</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(MyExpParam-&gt;<ref refid="classExpParameters_1a6f9185d4fae1038b1bf6672cd5937eef" kindref="member">MyGPParam</ref>.<ref refid="struct__GlobPParam_1ac28bdb8b27ff1dc65f63569f004497f2" kindref="member">Dyn_nCardSequence</ref>[i]==0)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;}</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="comment">//Dyn_nCardSequence<sp/>=<sp/>8bits.<sp/>Corren<sp/>un<sp/>bit<sp/>a<sp/>la<sp/>izquierda<sp/>&lt;&lt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Adquiere<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>máscara<sp/>de<sp/>cada<sp/>tarjeta<sp/>(m_nCardsMask<sp/>inicializado<sp/>en<sp/>0<sp/>en<sp/>el<sp/>constructor)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nCardsMask=JARSControl.m_nCardsMask<sp/>|<sp/>(1&lt;&lt;(MyExpParam-&gt;<ref refid="classExpParameters_1a6f9185d4fae1038b1bf6672cd5937eef" kindref="member">MyGPParam</ref>.<ref refid="struct__GlobPParam_1ac28bdb8b27ff1dc65f63569f004497f2" kindref="member">Dyn_nCardSequence</ref>[i]-1));</highlight><highlight class="comment">//<sp/>|<sp/>es<sp/>un<sp/>bitwise<sp/>OR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nCardsMask^=255;<sp/></highlight><highlight class="comment">//^<sp/>es<sp/>un<sp/>XOR<sp/>.Se<sp/>realiza<sp/>un<sp/>XOR<sp/>entre:<sp/>m_nCardsMask<sp/>y<sp/>255<sp/>y<sp/>nos<sp/>da<sp/>m_nCardsMask</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nCardsMask=JARSControl.m_nCardsMask<sp/>|<sp/>1792;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Cards<sp/>mask<sp/>was<sp/>loaded\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//------------------<sp/>Carga<sp/>de<sp/>mascara<sp/>de<sp/>canales<sp/>seleccionados<sp/>--------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//******************m_nChannelsMask=<sp/>11<sp/>elementos<sp/>:<sp/>ceros<sp/>=<sp/>#<sp/>canales,<sp/>unos<sp/>=<sp/>11-<sp/>#<sp/>canales<sp/>*******************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=(MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1a2fc99bf00c5551764122a0924a1df888" kindref="member">m_nChannels</ref>-1);<sp/>i&gt;=0;<sp/>i--)</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1abb9ba419e2dd0853d6d43e1a32f3de7a" kindref="member">m_nNumberOfChannel</ref>[i]==0)</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;}</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nChannelsMask=JARSControl.m_nChannelsMask<sp/>|<sp/>(1&lt;&lt;(MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1abb9ba419e2dd0853d6d43e1a32f3de7a" kindref="member">m_nNumberOfChannel</ref>[i]-1));</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nChannelsMask^=255;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nChannelsMask=JARSControl.m_nChannelsMask<sp/>|<sp/>1792;</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Channels<sp/>mask<sp/>was<sp/>loaded\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="372"><highlight class="normal">}</highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"></highlight><highlight class="comment">//Lee<sp/>el<sp/>archivo<sp/>.jars<sp/>que<sp/>contiene<sp/>la<sp/>configuracion<sp/>de<sp/>los<sp/>filtros<sp/>del<sp/>DSP.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight><highlight class="comment">//*********Define<sp/>el<sp/>arreglo<sp/>m_nFilterCoeff<sp/>donde<sp/>sus<sp/>elementos<sp/>son<sp/>valores<sp/>hexadecimales<sp/>que<sp/>definen<sp/>los<sp/>registros<sp/>del<sp/>DSP<sp/>y<sp/>establecen<sp/>los<sp/>parámetros<sp/>del<sp/>filtros<sp/>(decimació)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"></highlight><highlight class="comment">//Solo<sp/>define<sp/>,<sp/>no<sp/><sp/>envía.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight><highlight class="comment">//Pd:<sp/>Exsite<sp/>un<sp/>protocolo<sp/>entre<sp/>el<sp/>FPGA<sp/>de<sp/>Programacion<sp/>y<sp/>el<sp/>DSP<sp/>antes<sp/>de<sp/>establecer<sp/>los<sp/>valores</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::LoadFilter()</highlight></codeline>
<codeline lineno="379"><highlight class="normal">{</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Adress300=0x300,<sp/>Adress0=0x0,<sp/>AdressTemp;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int16_t<sp/>CoeffTemp;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FILE*<sp/>MyRacpFile;</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>StrTemp[100];</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>StrPtr;</highlight></codeline>
<codeline lineno="386"><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;%s\n&quot;</highlight><highlight class="normal">,<sp/>MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1a21afc473251fa7d300d5a1b8c3f67d8f" kindref="member">m_sFilterPath</ref>);</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MyRacpFile=fopen(MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1a21afc473251fa7d300d5a1b8c3f67d8f" kindref="member">m_sFilterPath</ref>,</highlight><highlight class="stringliteral">&quot;r&quot;</highlight><highlight class="normal">);</highlight><highlight class="comment">//abre<sp/>la<sp/>direccion<sp/>solo<sp/>lectura</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((MyRacpFile)==0)</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;No<sp/>filtro<sp/>ingresado,<sp/>tomando<sp/>filtro<sp/>por<sp/>defecto\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(;;)</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(feof(MyRacpFile))</highlight><highlight class="comment">//si<sp/>llega<sp/>al<sp/>final</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/>fclose(MyRacpFile);</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fgets(StrTemp,100,MyRacpFile);</highlight><highlight class="comment">//lee<sp/>las<sp/>100<sp/>primeras<sp/>variables<sp/>de<sp/>MyRacpFile<sp/>,<sp/>incluyendo<sp/>el<sp/>null-character</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(StrTemp[0]==</highlight><highlight class="charliteral">&apos;3&apos;</highlight><highlight class="normal"><sp/>||<sp/>StrTemp[0]==</highlight><highlight class="charliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(StrTemp[0]==</highlight><highlight class="charliteral">&apos;3&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AdressTemp=Adress300++;<sp/></highlight><highlight class="comment">//<sp/>primer<sp/><sp/>bloque<sp/>de<sp/>direcciones<sp/>300h<sp/>-&gt;<sp/>30Dh</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(StrTemp[0]==</highlight><highlight class="charliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AdressTemp=Adress0++;</highlight><highlight class="comment">//<sp/>segundo<sp/>bloque<sp/>de<sp/>direcciones<sp/>000h<sp/>-&gt;<sp/>?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=(((AdressTemp&gt;&gt;8)<sp/>&amp;<sp/>0x000000FF<sp/>)<sp/>|<sp/>0x00000700);</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=<sp/>((AdressTemp<sp/>&amp;<sp/>0x000000FF)<sp/>|<sp/>0x00000600);</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StrPtr=strstr(StrTemp,<sp/></highlight><highlight class="stringliteral">&quot;-&gt;&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StrPtr+=2;</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(AdressTemp==0x302)</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j=0;<sp/>j&lt;4;<sp/>j++)</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=(0xFF<sp/>|<sp/>(3-j)&lt;&lt;8);</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j=0;j&lt;4;j++)</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((((CoeffTemp=(atoi(StrPtr)&gt;&gt;((3-j)&lt;&lt;3))&amp;<sp/>0x00FF)==0)<sp/>&amp;<sp/>(j!=3))<sp/>&amp;&amp;<sp/>AdressTemp&gt;=0x300)</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff]=(CoeffTemp<sp/>|(3-j)&lt;&lt;8);</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nCountCoeff++;}</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(StrTemp[0]==</highlight><highlight class="charliteral">&apos;R&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="comment">//<sp/>Se<sp/>terminan<sp/>de<sp/>leer<sp/>los<sp/>coefficientes,<sp/>creo<sp/>los<sp/>ultimos<sp/>caracteres<sp/>finales</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=<sp/>0x03<sp/>|<sp/>0x00000700;</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=<sp/>0x00<sp/>|<sp/>0x00000600;<sp/></highlight><highlight class="comment">//<sp/>300h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=<sp/>0x01<sp/>|<sp/>0x00000000;<sp/></highlight><highlight class="comment">//<sp/>0x01</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=<sp/>0x03<sp/>|<sp/>0x00000700;</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=<sp/>0x00<sp/>|<sp/>0x00000600;<sp/></highlight><highlight class="comment">//<sp/>301h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.m_nFilterCoeff[JARSControl.m_nCountCoeff++]=<sp/>0x00<sp/>|<sp/>0x00000000;<sp/></highlight><highlight class="comment">//<sp/>0x00</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fclose(MyRacpFile);</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Filter<sp/>was<sp/>loaded\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="440"><highlight class="normal">}</highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight><highlight class="comment">//---------<sp/>Define<sp/>el<sp/>payload<sp/>de<sp/>RST_CTRL<sp/>para<sp/>ser<sp/>enviado<sp/>en<sp/>formato<sp/>de<sp/>bytes<sp/>y<sp/>lo<sp/>envía----------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight><highlight class="comment">//*********<sp/>Imprime:<sp/>Nombre<sp/>de<sp/>comando,tipo<sp/>de<sp/>operación,paquete<sp/>de<sp/>dato<sp/>recibido*******</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::RESET_CTRL_COMMAND()</highlight></codeline>
<codeline lineno="445"><highlight class="normal">{</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>cmd_jars=0;</highlight><highlight class="comment">//4<sp/>bytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload=3;</highlight><highlight class="comment">//24<sp/>bits</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//unsigned<sp/>long<sp/>int<sp/>size_payload=3;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Reset<sp/>JARS\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1ad727a3b9d581739d2e5e88b1716ee1dd" kindref="member">CHIP_ALL</ref>;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^<ref refid="JarsControl_8h_1a1aa9678f48f9b9661062c9246e64993a" kindref="member">RST_CTRL</ref>;</highlight><highlight class="comment">//**define<sp/>tipo<sp/>de<sp/>operación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a764ae24ad191463aa0dc64ea1e105d13" kindref="member">BY_CMD</ref>;</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^0x00;</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(int)cmd_jars;</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>RST_CTRL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,0,payload,size_payload);</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//da<sp/>valor<sp/>a<sp/>los<sp/>elementos<sp/>del<sp/>buffer<sp/>payload<sp/>igual<sp/>a<sp/>cero</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="464"><highlight class="normal">}</highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"></highlight><highlight class="comment">//-------<sp/>Define<sp/>el<sp/>payload<sp/>de<sp/>MODE_OPER<sp/>para<sp/>ser<sp/>enviado<sp/>en<sp/>formato<sp/>de<sp/>bytes.<sp/>Esto<sp/>hace<sp/>que<sp/>JARS<sp/>2.0<sp/>genere<sp/>su<sp/>propio<sp/>win<sp/>sin<sp/>el<sp/>CR------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"></highlight><highlight class="comment">//*******************<sp/>Imprime:<sp/>Nombre<sp/>de<sp/>comando,tipo<sp/>de<sp/>operación,paquete<sp/>de<sp/>dato<sp/>recibido*******</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::MODE_OPER_COMMAND()</highlight></codeline>
<codeline lineno="469"><highlight class="normal">{</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>cmd_jars=0;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload=3;</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Operation<sp/>Mode<sp/>JARS\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1ad727a3b9d581739d2e5e88b1716ee1dd" kindref="member">CHIP_ALL</ref>;</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^<ref refid="JarsControl_8h_1a52e278dd9e601652e8ab11b70c53ef6e" kindref="member">MODE_OPER</ref>;</highlight><highlight class="comment">//**define<sp/>tipo<sp/>de<sp/>operación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a764ae24ad191463aa0dc64ea1e105d13" kindref="member">BY_CMD</ref>;</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^0x00;</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(int)cmd_jars;</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>MODE_OPER.Imprime<sp/>los<sp/>arreglos<sp/>seleccionados</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,0,payload,size_payload);</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//da<sp/>valor<sp/>a<sp/>los<sp/>elementos<sp/>del<sp/>buffer<sp/>payload<sp/>igual<sp/>a<sp/>cero</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="487"><highlight class="normal">}</highlight></codeline>
<codeline lineno="488"><highlight class="normal"></highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight><highlight class="comment">//-------------------<sp/>Define<sp/>el<sp/>payload<sp/>de<sp/>ELECTION_RXD<sp/>para<sp/>ser<sp/>enviado<sp/>en<sp/>formato<sp/>de<sp/>bytes//<sp/>Simulacion<sp/>de<sp/>canales------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight><highlight class="comment">//*******************<sp/>Imprime:<sp/>Nombre<sp/>de<sp/>comando,tipo<sp/>de<sp/>operación,paquete<sp/>de<sp/>dato<sp/>recibido*******</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::SELECT_RXD_COMMAND()</highlight></codeline>
<codeline lineno="492"><highlight class="normal">{</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>cmd_jars=0;</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload=3;</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Select<sp/>receivers\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1ad727a3b9d581739d2e5e88b1716ee1dd" kindref="member">CHIP_ALL</ref>;</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^<ref refid="JarsControl_8h_1ab8923675701bbbb7f51c4e68fac5e588" kindref="member">ELECTION_RXD</ref>;</highlight><highlight class="comment">//**define<sp/>tipo<sp/>de<sp/>operación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a764ae24ad191463aa0dc64ea1e105d13" kindref="member">BY_CMD</ref>;</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^JARSControl.m_nCardsMask;</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)cmd_jars;</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>ELECTION_RXD.Imprime<sp/>los<sp/>arreglos<sp/>seleccionados</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,0,payload,size_payload);</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//da<sp/>valor<sp/>a<sp/>los<sp/>elementos<sp/>del<sp/>buffer<sp/>payload<sp/>igual<sp/>a<sp/>cero</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="510"><highlight class="normal">}</highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"></highlight><highlight class="comment">//-------------------<sp/>Define<sp/>el<sp/>payload<sp/>de<sp/>POWER_RXD<sp/>para<sp/>ser<sp/>enviado<sp/>en<sp/>formato<sp/>de<sp/>bytes<sp/>--------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight><highlight class="comment">//*******************<sp/>Imprime:<sp/>Nombre<sp/>de<sp/>comando,tipo<sp/>de<sp/>operación,paquete<sp/>de<sp/>dato<sp/>recibido<sp/>******</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::PW_RXD_COMMAND()</highlight></codeline>
<codeline lineno="515"><highlight class="normal">{</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>cmd_jars=0;</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload=3;</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Power<sp/>the<sp/>selected<sp/>receivers\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1afec22c32aec0b1d3972cdaba0d0ccec7" kindref="member">CHIP_COMAND</ref>;</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^<ref refid="JarsControl_8h_1a063240a0c681e13158e249f55ac4b750" kindref="member">POWER_RXD</ref>;</highlight><highlight class="comment">//**define<sp/>tipo<sp/>de<sp/>operación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a764ae24ad191463aa0dc64ea1e105d13" kindref="member">BY_CMD</ref>;</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^JARSControl.m_nChannelsMask;</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)cmd_jars;</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>POWER_RXD.Imprime<sp/>los<sp/>arreglos<sp/>seleccionados</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,0,payload,size_payload);</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//da<sp/>valor<sp/>a<sp/>los<sp/>elementos<sp/>del<sp/>buffer<sp/>payload<sp/>igual<sp/>a<sp/>cero</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="533"><highlight class="normal">}</highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight><highlight class="comment">//--------------Define<sp/>el<sp/>payload<sp/>de<sp/>PROG_RXD<sp/>para<sp/>ser<sp/>enviado<sp/>en<sp/>formato<sp/>de<sp/>bytes--------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight><highlight class="comment">//**************Imprime:<sp/>Nombre<sp/>de<sp/>comando,tipo<sp/>de<sp/>operación,paquete<sp/>de<sp/>dato<sp/>recibido***********</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::PROG_RXD_COMMAND()</highlight></codeline>
<codeline lineno="538"><highlight class="normal">{</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>cmd_jars=0;</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload=3;</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Program<sp/>the<sp/>selected<sp/>receivers\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1afec22c32aec0b1d3972cdaba0d0ccec7" kindref="member">CHIP_COMAND</ref>;</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^<ref refid="JarsControl_8h_1aefde68a634d66b7039aa56de3fd5301b" kindref="member">PROG_RXD</ref>;</highlight><highlight class="comment">//**define<sp/>tipo<sp/>de<sp/>operación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a45ab7a7b703b2e5615905682f51b9e1d" kindref="member">BY_DATA</ref>;</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^JARSControl.m_nCountCoeff;</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)cmd_jars;</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>PROG_RXD.Imprime<sp/>los<sp/>arreglos<sp/>seleccionados</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,0,payload,size_payload);</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//da<sp/>valor<sp/>a<sp/>los<sp/>elementos<sp/>del<sp/>buffer<sp/>payload<sp/>igual<sp/>a<sp/>cero</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="556"><highlight class="normal">}</highlight></codeline>
<codeline lineno="557"><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal"></highlight><highlight class="comment">//*****************<sp/>Envía<sp/>los<sp/>coeficientes<sp/>de<sp/>configuracion<sp/>establecidos<sp/>en<sp/>el<sp/>LoadFilter<sp/>al<sp/>SP601<sp/>*******************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"></highlight><highlight class="comment">//*****************<sp/>Recibe<sp/>el<sp/>buffer_rcv<sp/>de<sp/>respuesta<sp/>y<sp/>lo<sp/>muestra<sp/>en<sp/>formato<sp/>hexadecimal<sp/>****************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::WriteFilter()</highlight></codeline>
<codeline lineno="561"><highlight class="normal">{</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>vector_coeff[256];</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[4]={};</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_vector_coeff=2*(JARSControl.m_nCountCoeff+1);</highlight><highlight class="comment">//envia<sp/>en<sp/>char,<sp/>considera<sp/>en<sp/>peso<sp/>el<sp/>&apos;0&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Write<sp/>Filter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Write<sp/>Filter\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;%lu<sp/>coefficients\n&quot;</highlight><highlight class="normal">,size_vector_coeff);</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/>vector_coeff[0]=0;<sp/>vector_coeff[1]=0;</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//printf(&quot;%i,%i\n&quot;,vector_coeff[0],vector_coeff[1]);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//***Define<sp/>el<sp/>vector_coeff<sp/>el<sp/>cual<sp/>será<sp/>enviado<sp/>como<sp/>payload<sp/>en<sp/>send***</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=0;i&lt;JARSControl.m_nCountCoeff;i++){</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(JARSControl.m_nFilterCoeff[i],payload,2);</highlight><highlight class="comment">//los<sp/>coeficientes<sp/>los<sp/>pasa<sp/>a<sp/>bytes<sp/>(2<sp/>partes)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vector_coeff[2*i+2]=payload[0];</highlight><highlight class="comment">//guarda<sp/>la<sp/>primera<sp/>parte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vector_coeff[2*i+3]=payload[1];</highlight><highlight class="comment">//guarda<sp/>la<sp/>segunda<sp/>parte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a28b6b130f7a5b8cdbee96bb17ef151af" kindref="member">SEND_FILTER</ref>,0,vector_coeff,size_vector_coeff);</highlight><highlight class="comment">//ENVIA<sp/>EN<sp/>BYTES</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="578"><highlight class="normal">}</highlight></codeline>
<codeline lineno="579"><highlight class="normal"></highlight></codeline>
<codeline lineno="580"><highlight class="normal"></highlight><highlight class="comment">//**<sp/>Verifica<sp/>si<sp/>se<sp/>habilitó<sp/>la<sp/>transferencia<sp/>de<sp/>comandos<sp/>y<sp/>el<sp/>configDataTransfer************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="581" refid="class__JARSControl_1a580e2201213c8276faaa2022c28d5a03" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a580e2201213c8276faaa2022c28d5a03" kindref="member">_JARSControl::jro_InitAcquisition</ref>()</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="582"><highlight class="normal">{</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(VarSetSystem)</highlight><highlight class="comment">//VarSetSystem=0<sp/>está<sp/>bien</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//Habilitado<sp/>la<sp/>transferencia<sp/>de<sp/>datos<sp/>,<sp/>nos<sp/>da<sp/>true<sp/>al<sp/>final</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.HAB_TRANS_COMMAND())<sp/><sp/></highlight><highlight class="comment">//<sp/>Activa<sp/>los<sp/>receptores<sp/>digitales</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Inicializa<sp/>la<sp/>adquisición,<sp/>la<sp/>generación<sp/>de<sp/>threads<sp/>zmq<sp/>y<sp/>define<sp/>el<sp/>parámetro<sp/>del<sp/>puntero<sp/>de<sp/>función</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.ConfigDataTransfer())</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/>usleep(50000);</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="593"><highlight class="normal">}</highlight></codeline>
<codeline lineno="594"><highlight class="normal"></highlight></codeline>
<codeline lineno="595"><highlight class="normal"></highlight><highlight class="comment">//-----<sp/>Define<sp/>el<sp/>payload<sp/>de<sp/>ENABLE_TRANSF<sp/>q<sp/>habilita<sp/>la<sp/>tranf<sp/>de<sp/>comandos<sp/>y<sp/>lo<sp/>envía<sp/>al<sp/>SP601-----------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"></highlight><highlight class="comment">//*****<sp/>Imprime:<sp/>Nombre<sp/>de<sp/>comando,tipo<sp/>de<sp/>operación,paquete<sp/>de<sp/>dato<sp/>recibido*************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::HAB_TRANS_COMMAND()</highlight></codeline>
<codeline lineno="598"><highlight class="normal">{</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/>cmd_jars=0;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload=3;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Enable<sp/>data<sp/>transfer\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1ad727a3b9d581739d2e5e88b1716ee1dd" kindref="member">CHIP_ALL</ref>;</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^<ref refid="JarsControl_8h_1ad7e5e3b2ac85d92fe9b81bac2368ca02" kindref="member">ENABLE_TRANSF</ref>;</highlight><highlight class="comment">//**define<sp/>tipo<sp/>de<sp/>operación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a764ae24ad191463aa0dc64ea1e105d13" kindref="member">BY_CMD</ref>;</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^0x00;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(int)cmd_jars;</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>ENABLE_TRANSF.Imprime<sp/>los<sp/>arreglos<sp/>seleccionados</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,0,payload,size_payload);</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="614"><highlight class="normal">}</highlight></codeline>
<codeline lineno="615"><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"></highlight><highlight class="comment">//**************<sp/><sp/><sp/>Método<sp/>que<sp/>inicializa<sp/>la<sp/>adquisición,<sp/>la<sp/>generación<sp/>de<sp/>threads<sp/>zmq<sp/>y<sp/>el<sp/>guardado<sp/>de<sp/>la<sp/>data<sp/>en<sp/>disco</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"></highlight><highlight class="comment">//**************<sp/><sp/><sp/>La<sp/>única<sp/>forma<sp/>de<sp/>salir<sp/>de<sp/>los<sp/>bucles<sp/>de<sp/>los<sp/>threads<sp/>es<sp/>con<sp/>una<sp/>interrupción<sp/>externa<sp/>Cnt+c</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::ConfigDataTransfer()</highlight></codeline>
<codeline lineno="619"><highlight class="normal">{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>IPP,DH;</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>NTX,<sp/>Nchannels,<sp/>Nsamples_by_channel;</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Nsamples;</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Nprofilesperblock;</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>IPPu;</highlight></codeline>
<codeline lineno="624"><highlight class="normal"></highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[4];</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//************<sp/>Establece<sp/>parámetros<sp/>de<sp/>adquisición<sp/>del<sp/>radar<sp/>para<sp/>ser<sp/>enviados<sp/>**************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IPP=(float)(JARSControl.<ref refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" kindref="member">MyExpParam</ref>-&gt;<ref refid="classExpParameters_1a3101e02498e631d62ed0a08bbdd97ce4" kindref="member">MyGRCParam</ref>.<ref refid="struct__GlobRCParam_1a3266169525e2a7d77be441ba398a105a" kindref="member">FixRCP</ref>.<ref refid="struct__RadarControllerParam_1ae8ac79e57158371f6524e1d160b0d96e" kindref="member">m_fIPP</ref>);</highlight><highlight class="comment">//valor<sp/>de<sp/>la<sp/>Ipp<sp/>del<sp/>.racp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NTX<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>int)(JARSControl.<ref refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" kindref="member">MyExpParam</ref>-&gt;<ref refid="classExpParameters_1a3101e02498e631d62ed0a08bbdd97ce4" kindref="member">MyGRCParam</ref>.<ref refid="struct__GlobRCParam_1a3266169525e2a7d77be441ba398a105a" kindref="member">FixRCP</ref>.<ref refid="struct__RadarControllerParam_1a11c44c04097c6e7a89f0f4c1c6b92f2d" kindref="member">m_nNTX</ref>);</highlight><highlight class="comment">//numero<sp/>de<sp/>ipp<sp/>por<sp/>synchr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DH<sp/>=<sp/>(float)(JARSControl.<ref refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" kindref="member">MyExpParam</ref>-&gt;<ref refid="classExpParameters_1a3101e02498e631d62ed0a08bbdd97ce4" kindref="member">MyGRCParam</ref>.<ref refid="struct__GlobRCParam_1abc125c5fd3f6736a5df976d249f7ae42" kindref="member">Dyn_sfAcqDH</ref>[0]);</highlight><highlight class="comment">//resolución<sp/>de<sp/>altura</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IPPu<sp/>=<sp/>ceil(IPP/DH);</highlight><highlight class="comment">//redondea<sp/>para<sp/>arriba<sp/>//cantidad<sp/>de<sp/>DHs<sp/>por<sp/>Ipp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Nchannels<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>int)(JARSControl.<ref refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" kindref="member">MyExpParam</ref>-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1a2fc99bf00c5551764122a0924a1df888" kindref="member">m_nChannels</ref>);</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Nsamples_by_channel=(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>int)(JARSControl.<ref refid="class__JARSControl_1a3a9bee0735edcc19019ea89c876bb324" kindref="member">MyExpParam</ref>-&gt;<ref refid="classExpParameters_1a3101e02498e631d62ed0a08bbdd97ce4" kindref="member">MyGRCParam</ref>.<ref refid="struct__GlobRCParam_1a75b52d816c427cacd56aa202274565cf" kindref="member">Dyn_snAcqNSA</ref>[0]);</highlight><highlight class="comment">//<sp/>número<sp/>de<sp/>muestras<sp/>por<sp/>canal<sp/>para<sp/>un<sp/>perfil</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Nsamples<sp/>=<sp/>Nchannels*Nsamples_by_channel+1;</highlight><highlight class="comment">//numero<sp/>de<sp/>muestra<sp/>en<sp/>todos<sp/>los<sp/>canales<sp/>para<sp/>un<sp/>perfil</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Nprofilesperblock<sp/>=<sp/>MyExpParam-&gt;<ref refid="classExpParameters_1a6f9185d4fae1038b1bf6672cd5937eef" kindref="member">MyGPParam</ref>.<ref refid="struct__GlobPParam_1a0abce01487be8839d4e3ce356246eb51" kindref="member">m_nProfilesperBlock</ref>;</highlight></codeline>
<codeline lineno="635"><highlight class="normal"></highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(IPPu&gt;65536){</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Units<sp/>of<sp/>IPP<sp/>exceeded!<sp/>%i&quot;</highlight><highlight class="normal">,IPPu);</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exit(1);</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>printf(</highlight><highlight class="stringliteral">&quot;IPP(Km/units):<sp/>%.1f,<sp/>%i\n&quot;</highlight><highlight class="normal">,IPP,IPPu);</highlight></codeline>
<codeline lineno="640"><highlight class="normal"></highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(NTX&gt;65536){</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Number<sp/>of<sp/>NTX<sp/>exceeded!<sp/>%i&quot;</highlight><highlight class="normal">,NTX);</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exit(1);</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>printf(</highlight><highlight class="stringliteral">&quot;Number<sp/>of<sp/>NTX:<sp/>%i\n&quot;</highlight><highlight class="normal">,NTX);</highlight></codeline>
<codeline lineno="645"><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Resolution:<sp/>%.4f\n&quot;</highlight><highlight class="normal">,DH);</highlight></codeline>
<codeline lineno="647"><highlight class="normal"></highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(Nsamples&gt;4294967296)<sp/>{</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Number<sp/>of<sp/>samples<sp/>per<sp/>profile<sp/>exceeded!<sp/>%i\n&quot;</highlight><highlight class="normal">,Nsamples);</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exit(1);</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>printf(</highlight><highlight class="stringliteral">&quot;Number<sp/>of<sp/>Samples<sp/>per<sp/>profile:<sp/>%i\n&quot;</highlight><highlight class="normal">,Nsamples);</highlight></codeline>
<codeline lineno="652"><highlight class="normal"></highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Number<sp/>of<sp/>Profiles<sp/>per<sp/>block:<sp/>%i\n&quot;</highlight><highlight class="normal">,Nprofilesperblock);</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Number<sp/>of<sp/>Samples<sp/>for<sp/>all<sp/>profiles:<sp/>%i\n&quot;</highlight><highlight class="normal">,Nsamples*Nprofilesperblock);</highlight></codeline>
<codeline lineno="655"><highlight class="normal"></highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//IPP=1000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//payload[0]=0x03;payload[1]=0x20</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[0]=(char)(IPPu&gt;&gt;8);<sp/>payload[1]=(char)(IPPu);<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Load<sp/>IPPunits</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//payload[2]=<sp/>0x00<sp/>;<sp/>payload[3]=0x96</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[2]=(char)(NTX&gt;&gt;8);<sp/>payload[3]=(char)(NTX);<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Load<sp/>NTX</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//payload[4]=0x00<sp/>;<sp/>payload[5]=<sp/>0x00</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[4]=(char)(Nsamples&gt;&gt;24);<sp/>payload[5]=(char)(Nsamples&gt;&gt;16);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Load<sp/>SamplesperProfile</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//payload[6]=0x03<sp/>;<sp/>payload[7]=0xE9</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>payload[6]=(char)(Nsamples&gt;&gt;8);<sp/>payload[7]=(char)(Nsamples);</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a55636b09cf88b31facd828042757e8cd" kindref="member">DATA_LOOPS</ref>,0,payload,8);<sp/></highlight><highlight class="comment">//<sp/>2<sp/>bytes<sp/>for<sp/>IPPunits,<sp/>2<sp/>bytes<sp/>for<sp/>NTX,<sp/>4<sp/>bytes<sp/>for<sp/>SamplesperProfile</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"></highlight></codeline>
<codeline lineno="667"><highlight class="normal"></highlight><highlight class="comment">//************************Se<sp/>crean<sp/>threads<sp/>paralelos<sp/>en<sp/>el<sp/>proceso<sp/>JARSControl<sp/>que<sp/>realizan<sp/>las<sp/>tareas<sp/>de<sp/>Internalx***********************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"></highlight><highlight class="comment">//Ejecuta<sp/>la<sp/>parte<sp/>del<sp/>socket<sp/>para<sp/>la<sp/>recepcion<sp/>de<sp/>paquetes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(pthread_create(&amp;JARSControl._thread_rcv,<sp/>NULL,<sp/>JARSControl.<ref refid="class__JARSControl_1a643f89d471e0690716b0aae9cb39b10f" kindref="member">InternalRcvFunc</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">)==0)</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Now<sp/>the<sp/>packets<sp/>receiver<sp/>thread<sp/>starts\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(pthread_create(&amp;JARSControl._thread_jars,<sp/>NULL,<sp/>JARSControl.<ref refid="class__JARSControl_1a6c19d395de3d648bc66f2b7f886fe10c" kindref="member">InternalThreadEntryFunc</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">)==0)</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Now<sp/>the<sp/>block<sp/>constructor<sp/>thread<sp/>starts\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(pthread_create(&amp;JARSControl._thread_jars_rcv,<sp/>NULL,<sp/>JARSControl.<ref refid="class__JARSControl_1a7ee41ba1eaf9a77999e55fcda1660cf2" kindref="member">InternalCallbackFunc</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">)==0)</highlight><highlight class="comment">//define<sp/>el<sp/>puntero</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Now<sp/>the<sp/>block<sp/>save<sp/>thread<sp/>s_thread_configtarts\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="682"><highlight class="normal">}</highlight></codeline>
<codeline lineno="683"><highlight class="normal"></highlight></codeline>
<codeline lineno="684"><highlight class="normal"></highlight><highlight class="comment">//verifica<sp/>si<sp/>se<sp/>detuvo<sp/>la<sp/>adquisicion<sp/>mediante<sp/>el<sp/>envio<sp/>del<sp/>comando<sp/>de<sp/>deshabilitacion<sp/>y<sp/>reseteo<sp/>del<sp/>JARS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="685"><highlight class="normal"></highlight><highlight class="comment">//Envia<sp/>un<sp/>request<sp/>de<sp/>cancelación<sp/>al<sp/>thread<sp/>de<sp/>origen<sp/>de<sp/>bloques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="686" refid="class__JARSControl_1a3a32dd8bf71407e2657267980476ca50" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a3a32dd8bf71407e2657267980476ca50" kindref="member">_JARSControl::jro_StopAcquisition</ref>()</highlight></codeline>
<codeline lineno="687"><highlight class="normal">{</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.DESHAB_TRANS_COMMAND())</highlight><highlight class="comment">//Envía<sp/>el<sp/>comando<sp/>de<sp/>deshabilitación</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!JARSControl.RESET_CTRL_COMMAND())<sp/></highlight><highlight class="comment">//<sp/>Resetea<sp/>el<sp/>sistema,<sp/>reincia<sp/>todos<sp/>los<sp/>FPGA&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Terminating<sp/>acquisition<sp/>thread</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Terminating<sp/>acquisition<sp/>thread...\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_cancel(JARSControl._thread_jars);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Sending<sp/>cancellation<sp/>request//cancela<sp/>el<sp/>thread<sp/>por<sp/>si<sp/>queda<sp/>data<sp/>guardada</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleep(0.5);</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="697"><highlight class="normal">}</highlight></codeline>
<codeline lineno="698"><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"></highlight><highlight class="comment">//---<sp/>Define<sp/>un<sp/>payload<sp/>con<sp/>comando<sp/>0x00<sp/>y<sp/>el<sp/>payload<sp/>de<sp/>DISABLE_TRANSF<sp/>para<sp/>ser<sp/>enviado<sp/>en<sp/>formato<sp/>de<sp/>bytes-----------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="700"><highlight class="normal"></highlight><highlight class="comment">//comando<sp/>0x00:<sp/>crea<sp/>el<sp/>arreglo<sp/>cmd_array.NO<sp/>crea<sp/><sp/>info_Str,buffer_rcv</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="701"><highlight class="normal"></highlight><highlight class="comment">//comando<sp/>DISABLE_TRANSF:<sp/>genera<sp/>el<sp/>cmd_array,info_str,<sp/>recive<sp/>en<sp/>el<sp/>buffer_rcv,imprime<sp/>el<sp/>nombre<sp/>de<sp/>comando,<sp/>estdo<sp/>de<sp/>comando<sp/>de<sp/>config<sp/>y<sp/>buffer_rcv.NO<sp/>imprime<sp/>el<sp/>cmd_array</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="702"><highlight class="normal"></highlight><highlight class="comment">//*****<sp/>Espera<sp/>la<sp/>finalizacion<sp/>de<sp/>la<sp/>adquisición<sp/>y<sp/>envia<sp/>el<sp/>comando<sp/>de<sp/>deshabilitación.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_JARSControl::DESHAB_TRANS_COMMAND()</highlight></codeline>
<codeline lineno="704"><highlight class="normal">{</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/>cmd_jars=0;</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload=3;</highlight></codeline>
<codeline lineno="708"><highlight class="normal"></highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>********close<sp/>all<sp/>the<sp/>threads</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>********Espera<sp/>a<sp/>que<sp/>el<sp/>hilo<sp/>_thread_rcv<sp/>acabe<sp/>(termina<sp/>el<sp/>hilo<sp/>_thread_rcv<sp/>y<sp/>devuelve<sp/>NULL<sp/>a<sp/>nuestro<sp/>hilo<sp/>de<sp/>trabajo)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Al<sp/>terminar<sp/>ese<sp/>thread,<sp/>continuará<sp/>esta<sp/>parte.Los<sp/>demás<sp/>threads<sp/>continuarán</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pthread_join(_thread_rcv,<sp/>NULL);</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//************<sp/>Previous<sp/>command<sp/>to<sp/>exit<sp/>JARS<sp/>from<sp/>acquisition<sp/>loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//sp601_command(&apos;NOOP&apos;,0,int_to_bytearray(0,3))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//************<sp/>Crea<sp/>el<sp/>payload<sp/>antes<sp/>del<sp/>comando<sp/>de<sp/>deshabilitación<sp/>***********</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//************<sp/>Por<sp/>qué<sp/>envía<sp/>0x00</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1ad727a3b9d581739d2e5e88b1716ee1dd" kindref="member">CHIP_ALL</ref>;</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^0x00;</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a764ae24ad191463aa0dc64ea1e105d13" kindref="member">BY_CMD</ref>;</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^0x00;</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(int)cmd_jars;</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>NOOP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a7316843e88740cd819c6427a7f833df6" kindref="member">NOOP</ref>,0,payload,size_payload);<sp/></highlight><highlight class="comment">//<sp/>No<sp/>muestra<sp/>nada</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usleep(50000);</highlight><highlight class="comment">//suspende<sp/>la<sp/>ejecución<sp/>por<sp/>0.5<sp/>segundos</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="728"><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**********<sp/>Crea<sp/>el<sp/>payload<sp/>oara<sp/>el<sp/>comando<sp/>de<sp/>deshabilitacion<sp/>*****************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Disabling<sp/>data<sp/>transfer...\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/><ref refid="ExperimentConstants_8h_1a722e5785aae222e3f5f8f1e48db2e1fa" kindref="member">SYNCHRO</ref>;</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;2)^<ref refid="ExperimentConstants_8h_1ad727a3b9d581739d2e5e88b1716ee1dd" kindref="member">CHIP_ALL</ref>;</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;4)^<ref refid="JarsControl_8h_1aacac2365f297d20c92dac6c32a87c6a3" kindref="member">DISABLE_TRANSF</ref>;</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;1)^<ref refid="ExperimentConstants_8h_1a764ae24ad191463aa0dc64ea1e105d13" kindref="member">BY_CMD</ref>;</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(cmd_jars&lt;&lt;11)^0x00;</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_jars<sp/>=<sp/>(int)cmd_jars;</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Define<sp/>el<sp/>payload<sp/>como<sp/>3<sp/>bytes<sp/>de<sp/>cmd_jars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cmd_jars,payload,size_payload);</highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>cmd_array<sp/>con<sp/>los<sp/>bytes<sp/>configurados<sp/>para<sp/>el<sp/>comando<sp/>DISABLE_TRANSF</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MySP601-&gt;send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>,0,payload,size_payload);</highlight></codeline>
<codeline lineno="741"><highlight class="normal"></highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="743"><highlight class="normal">}</highlight></codeline>
<codeline lineno="744"><highlight class="normal"></highlight></codeline>
<codeline lineno="745"><highlight class="normal"></highlight><highlight class="comment">//this<sp/>pointer:<sp/>puntero<sp/>al<sp/>OBJETO<sp/>del<sp/>método<sp/>que<sp/>lo<sp/>llama</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="746"><highlight class="normal"></highlight><highlight class="comment">//**************this<sp/>=<sp/>Objeto<sp/>de<sp/>InternalRcvFunc**************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="747"><highlight class="normal"></highlight><highlight class="comment">//Ejecuta<sp/>el<sp/>método<sp/>InternalRcv:<sp/>Crea<sp/>el<sp/>socket<sp/>zmq<sp/>que<sp/>almacena<sp/>los<sp/>paquetes<sp/>de<sp/>datos<sp/>adquiridos,por<sp/>marca,y<sp/>los<sp/>envía</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="748" refid="class__JARSControl_1a643f89d471e0690716b0aae9cb39b10f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="class__JARSControl_1a643f89d471e0690716b0aae9cb39b10f" kindref="member">_JARSControl::InternalRcvFunc</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>This)<sp/>{</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class__JARSControl" kindref="compound">_JARSControl</ref><sp/>*)This)-&gt;InternalRcv();<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight><highlight class="comment">//This<sp/>es<sp/>el<sp/>puntero<sp/>del<sp/>objeto<sp/>de<sp/>la<sp/>clase<sp/>JARSControl</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="750"><highlight class="normal">}</highlight></codeline>
<codeline lineno="751"><highlight class="normal"></highlight></codeline>
<codeline lineno="752"><highlight class="normal"></highlight><highlight class="comment">//********<sp/>Crea<sp/>un<sp/>soquet<sp/>ZMQ_PUSH,<sp/>recibe<sp/>bytes<sp/>del<sp/>socket<sp/>fpga<sp/>y<sp/>los<sp/>envía<sp/>a<sp/>través<sp/>del<sp/>socket<sp/>ZMQ<sp/>al<sp/>cliente<sp/>definido<sp/>en<sp/>InternalThreadEntry<sp/>******************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="753"><highlight class="normal"></highlight><highlight class="comment">//zmq<sp/>solo<sp/>almacena<sp/>la<sp/>data<sp/>adquirida<sp/>del<sp/>buffer<sp/>de<sp/>la<sp/>tarjeta<sp/>de<sp/>red<sp/>para<sp/>que<sp/>no<sp/>se<sp/>pierda<sp/>en<sp/>un<sp/>espacio<sp/>de<sp/>memoria<sp/>de<sp/>la<sp/>RAM</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight><highlight class="comment">//*********************<sp/>Comprueba<sp/>que<sp/>la<sp/>marca<sp/>del<sp/>bloque<sp/>es<sp/>la<sp/>correcta<sp/>verificando<sp/>así<sp/>que<sp/>el<sp/>bloque<sp/>de<sp/>llegada<sp/>es<sp/>el<sp/>correcto<sp/>*****************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="755"><highlight class="normal"></highlight></codeline>
<codeline lineno="756"><highlight class="normal"></highlight><highlight class="comment">//Crea<sp/>el<sp/>socket<sp/>zmq<sp/>que<sp/>almacena<sp/>los<sp/>paquetes<sp/>de<sp/>datos<sp/>adquiridos,<sp/>por<sp/>marca,<sp/>y<sp/>los<sp/>envía</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="757" refid="class__JARSControl_1a6e97ca0b4324bc1af443e36b28bb1d3e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a6e97ca0b4324bc1af443e36b28bb1d3e" kindref="member">_JARSControl::InternalRcv</ref>(){</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>buffer_rcv[1472];</highlight><highlight class="comment">//buffer<sp/>donde<sp/>se<sp/>guardará<sp/>el<sp/>mensaje<sp/>que<sp/>viene</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="759"><highlight class="normal"></highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>server<sp/>socket</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::socket_t<sp/>server<sp/>(<ref refid="JicaHeader_8h_1acfa1e2b991d398ea406cdd6198bb2ee6" kindref="member">context</ref>,<sp/>ZMQ_PUSH);</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>server.bind(</highlight><highlight class="stringliteral">&quot;ipc://5559&quot;</highlight><highlight class="normal">);</highlight><highlight class="comment">//Revisar<sp/>si<sp/>está<sp/>bien<sp/>declarado<sp/>y<sp/>si<sp/>es<sp/>el<sp/>correcto<sp/>protocolo<sp/>inproc.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>prev_mark<sp/>=<sp/>0,<sp/>new_mark,<sp/>dif_mark;</highlight></codeline>
<codeline lineno="764"><highlight class="normal"></highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Acquisition<sp/>threads<sp/>begin...\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(;;)<sp/>{</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//pthread_mutex_lock(&amp;estado_mutex);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Recibir<sp/>paquetes<sp/>de<sp/>datos<sp/>en<sp/>formato<sp/>de<sp/>bytes<sp/>(0x41,0x42,0xaa,0xaa,0xaa,0xam,dat_0[])</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ssize_t<sp/>size_rcv_buf=MySP601-&gt;receive(buffer_rcv);</highlight><highlight class="comment">//Recive<sp/>por<sp/>el<sp/>socket<sp/>UDP//paquete<sp/>de<sp/>1472<sp/>bytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Por<sp/>cada<sp/>bloque<sp/>UDP<sp/>se<sp/>genera<sp/>una<sp/>marca.Esta<sp/>marca<sp/>es<sp/>de<sp/>32bits<sp/>y<sp/>el<sp/>último<sp/>es<sp/>el<sp/>contador.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_mark<sp/>=<sp/>(int)(0x0F<sp/>&amp;<sp/>buffer_rcv[5]);</highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dif_mark<sp/>=<sp/>new_mark<sp/>-<sp/>prev_mark;</highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Review<sp/>the<sp/>correct<sp/>sequence<sp/>of<sp/>the<sp/>marks,<sp/>acumulacion<sp/>de<sp/>subperfiles</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//(=1),<sp/>siguiente<sp/>marca;(=0),UDP<sp/>en<sp/>el<sp/>mismo<sp/>windows;(=0),recién<sp/>comienza</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((dif_mark<sp/>==<sp/>1)<sp/>||<sp/>(dif_mark<sp/>==<sp/>65521)<sp/>||<sp/>(dif_mark<sp/>==<sp/>0)<sp/>||<sp/>(prev_mark==0)){</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Error..\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Lost<sp/>packet:<sp/>%i\n&quot;</highlight><highlight class="normal">,<sp/>dif_mark);</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Mark_prev:<sp/>%x\n&quot;</highlight><highlight class="normal">,<sp/>prev_mark);</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Mark_new:<sp/>%x\n&quot;</highlight><highlight class="normal">,<sp/>new_mark);</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev_mark<sp/>=<sp/>new_mark;</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*****************Inicializa<sp/>y<sp/>envía<sp/>un<sp/>mensaje<sp/>por<sp/>el<sp/>socket<sp/>ZMQ<sp/>*****************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//inicializa<sp/>un<sp/>mensaje<sp/>de<sp/>size_rcv_buf<sp/>bytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::message_t<sp/>reply(size_rcv_buf);</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//.data:retrieve<sp/>pointer<sp/>to<sp/>message<sp/>content</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Copia<sp/>el<sp/>mensaje<sp/>que<sp/>llega<sp/>en<sp/>reply.data()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy((</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<sp/>reply.data(),<sp/>buffer_rcv,<sp/>size_rcv_buf);</highlight><highlight class="comment">//void<sp/>*<sp/>memset<sp/>(<sp/>void<sp/>*<sp/>ptr,<sp/>int<sp/>value,<sp/>size_t<sp/>num<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>server.send(reply);</highlight><highlight class="comment">//envía<sp/>el<sp/>mensaje<sp/>de<sp/>llegada<sp/>por<sp/>el<sp/>soquet<sp/>ZMQ</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="791"><highlight class="normal"></highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="793"><highlight class="normal">}</highlight></codeline>
<codeline lineno="794"><highlight class="normal"></highlight></codeline>
<codeline lineno="795"><highlight class="normal"></highlight><highlight class="comment">//**************this<sp/>=<sp/>Objeto<sp/>de<sp/>InternalThreadEntryFunc**************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="796"><highlight class="normal"></highlight><highlight class="comment">//Ejecuta<sp/>el<sp/>método<sp/>InternalThreadEntry:almacena<sp/>la<sp/>cantidad<sp/>de<sp/>perfile<sp/>por<sp/>bloque*****************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="797" refid="class__JARSControl_1a6c19d395de3d648bc66f2b7f886fe10c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="class__JARSControl_1a6c19d395de3d648bc66f2b7f886fe10c" kindref="member">_JARSControl::InternalThreadEntryFunc</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>This)<sp/>{</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class__JARSControl" kindref="compound">_JARSControl</ref><sp/>*)This)-&gt;InternalThreadEntry();<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="799"><highlight class="normal">}</highlight></codeline>
<codeline lineno="800"><highlight class="normal"></highlight></codeline>
<codeline lineno="801"><highlight class="normal"></highlight><highlight class="comment">/***************<sp/>Tarea<sp/>que<sp/>adquiere<sp/>los<sp/>paquetes<sp/>y<sp/>convierte<sp/>a<sp/>perfiles<sp/>hasta<sp/>completar<sp/>un<sp/>bloque<sp/>************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="802"><highlight class="normal"></highlight><highlight class="comment">//**************Almacena<sp/>la<sp/>data<sp/>por<sp/>cada<sp/>sync<sp/>(NTX)<sp/>en<sp/>TempAcqNIDoubleBuffer<sp/>hasta<sp/>llegar<sp/>al<sp/>total<sp/>de<sp/>perfiles<sp/>por<sp/>bloque</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="803"><highlight class="normal"></highlight><highlight class="comment">//****<sp/>Al<sp/>llegar<sp/>a<sp/>la<sp/>cantidad<sp/>de<sp/>perfiles<sp/>por<sp/>bloque<sp/>lo<sp/>guarda<sp/>en<sp/>TempAcqNIBuffer<sp/>y<sp/>envía<sp/>&quot;Block<sp/>received&quot;<sp/>por<sp/>el<sp/>socket.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="804"><highlight class="normal"></highlight><highlight class="comment">//****<sp/>Nos<sp/>da<sp/>el<sp/>tiempo<sp/>de<sp/>demora<sp/>entre<sp/>bloques</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="805" refid="class__JARSControl_1a57bb6d2e0d1c5e18bd101de314651e8c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a57bb6d2e0d1c5e18bd101de314651e8c" kindref="member">_JARSControl::InternalThreadEntry</ref>(){</highlight></codeline>
<codeline lineno="806"><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>prev_mark<sp/>=<sp/>0,<sp/>new_mark,<sp/>dif_mark;</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num_prof=1;</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cnt_subprof=0;</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ind_buffer=0;</highlight></codeline>
<codeline lineno="811"><highlight class="normal"></highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>buffer_rcv_2[1472];</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ssize_t<sp/>size_rcv_buf;</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>size_rcv_buf_2;</highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>TmInit,TmFinal;</highlight></codeline>
<codeline lineno="816"><highlight class="normal"></highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>client<sp/>socket</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::socket_t<sp/>client<sp/>(<ref refid="JicaHeader_8h_1acfa1e2b991d398ea406cdd6198bb2ee6" kindref="member">context</ref>,<sp/>ZMQ_PULL);</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>client.connect(</highlight><highlight class="stringliteral">&quot;ipc://5559&quot;</highlight><highlight class="normal">);</highlight><highlight class="comment">//Revisar<sp/>si<sp/>está<sp/>bien<sp/>declarado<sp/>y<sp/>si<sp/>es<sp/>el<sp/>correcto<sp/>protocolo<sp/>inproc.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::message_t<sp/>msg;</highlight><highlight class="comment">//inicializa<sp/>el<sp/>objeto<sp/>mensaje<sp/>msg<sp/>de<sp/>zmq</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"></highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::string<sp/>msg_recv;</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::socket_t<sp/>server<sp/>(<ref refid="JicaHeader_8h_1acfa1e2b991d398ea406cdd6198bb2ee6" kindref="member">context</ref>,<sp/>ZMQ_PUSH);</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>server.bind(</highlight><highlight class="stringliteral">&quot;ipc://5557&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t*<sp/>TempAcqNIBuffer=(uint16_t*)JARSControl.m_AcqNIBuffer;</highlight><highlight class="comment">//definido<sp/>en<sp/>jro_AssignMemory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t*<sp/>TempAcqNIDoubleBuffer=(uint16_t*)JARSControl.m_AcqNIDoubleBuffer;</highlight><highlight class="comment">//definido<sp/>en<sp/>jro_AssignMemory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="827"><highlight class="normal"></highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(;;){</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>client.recv(&amp;msg);</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg_recv<sp/>=<sp/>string(static_cast&lt;char*&gt;(msg.data()),<sp/>msg.size());</highlight><highlight class="comment">//transforma<sp/>data<sp/>de<sp/>tipo<sp/>char<sp/>a<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>size_rcv_buf<sp/>=<sp/>msg.size();</highlight><highlight class="comment">//tamaño<sp/>con<sp/>cabecera</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="832"><highlight class="normal"></highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reconstruir<sp/>datos<sp/>en<sp/>formato<sp/>de<sp/>16<sp/>bits<sp/>(Real<sp/>e<sp/>Imaginario)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>size_rcv_buf_2<sp/>=<sp/>(size_rcv_buf-2)/2;</highlight><highlight class="comment">//le<sp/>resta<sp/>dos<sp/>bytes<sp/>de<sp/>la<sp/>cabecera<sp/>(0x41<sp/>0x42)<sp/>(/2)<sp/>ya<sp/>q<sp/>lo<sp/>almacena<sp/>en<sp/>16bits//numero<sp/>de<sp/>dieciseis<sp/>avos</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=0;i&lt;size_rcv_buf_2;i++){</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//lo<sp/>cambia<sp/>de<sp/>posicion<sp/>para<sp/>que<sp/>sea<sp/>visto<sp/>en<sp/>display//<sp/>el<sp/>FPGA<sp/>lo<sp/>vuelve<sp/>a<sp/>cambiar<sp/>a<sp/>la<sp/>posición<sp/>correcta</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>buffer_rcv_2[i]<sp/>=<sp/>((0x00FF<sp/>&amp;<sp/>msg_recv[2*i+3])&lt;&lt;8)<sp/>+<sp/>(0x00FF<sp/>&amp;<sp/>msg_recv[2*i+2]);</highlight><highlight class="comment">//no<sp/>toma<sp/>los<sp/>dos<sp/>primeros<sp/>ya<sp/>q<sp/>estan<sp/>borrados</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_mark<sp/>=<sp/>(int)(0x0F<sp/>&amp;<sp/>msg_recv[5]);</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dif_mark<sp/>=<sp/>new_mark<sp/>-<sp/>prev_mark;</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Review<sp/>the<sp/>correct<sp/>sequence<sp/>of<sp/>the<sp/>marks,<sp/>acumulacion<sp/>de<sp/>subperfiles</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((dif_mark<sp/>==<sp/>1)<sp/>||<sp/>(dif_mark<sp/>==<sp/>65521)<sp/>||<sp/>(dif_mark<sp/>==<sp/>0)<sp/>||<sp/>(prev_mark==0)){</highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//revisar<sp/>si<sp/>hay<sp/>cambio<sp/>de<sp/>marca<sp/>valida,<sp/>para<sp/>reiniciar<sp/>el<sp/>contador<sp/>de<sp/>subperfiles</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(dif_mark==1<sp/>||<sp/>(dif_mark<sp/>==<sp/>65521)){</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(num_prof<sp/>==<sp/>(MyExpParam-&gt;<ref refid="classExpParameters_1a6f9185d4fae1038b1bf6672cd5937eef" kindref="member">MyGPParam</ref>.<ref refid="struct__GlobPParam_1a0abce01487be8839d4e3ce356246eb51" kindref="member">m_nProfilesperBlock</ref>/MyExpParam-&gt;<ref refid="classExpParameters_1a3101e02498e631d62ed0a08bbdd97ce4" kindref="member">MyGRCParam</ref>.<ref refid="struct__GlobRCParam_1a3266169525e2a7d77be441ba398a105a" kindref="member">FixRCP</ref>.<ref refid="struct__RadarControllerParam_1a11c44c04097c6e7a89f0f4c1c6b92f2d" kindref="member">m_nNTX</ref>)){</highlight><highlight class="comment">//perfiles<sp/>por<sp/>bloque<sp/>por<sp/>cada<sp/>ipp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::string<sp/>msgToClient(</highlight><highlight class="stringliteral">&quot;Block<sp/>received&quot;</highlight><highlight class="normal">);</highlight><highlight class="comment">//define<sp/>msgToCliente</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy((uint16_t<sp/>*)TempAcqNIBuffer,(uint16_t<sp/>*)TempAcqNIDoubleBuffer,ind_buffer*2);</highlight><highlight class="comment">//copia<sp/>los<sp/>datagramas<sp/>por<sp/>bloque<sp/>y<sp/>al<sp/>revés,<sp/>con<sp/>solo<sp/>la<sp/>primera<sp/>cabecera,guardados<sp/>en<sp/>TempAcqNIDoubleBuffer<sp/>a<sp/>TempAcqNIBuffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0xaa<sp/>0xaa<sp/>0xam<sp/>0xaa<sp/>Dato<sp/>[1]<sp/>Dato[0]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::message_t<sp/>reply(msgToClient.size()+1);</highlight><highlight class="comment">//crea<sp/>el<sp/>mensaje<sp/>tipo<sp/>ZMQ<sp/>de<sp/>14<sp/>bytes+1<sp/>null</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy((</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<sp/>reply.data(),<sp/>(msgToClient.c_str()),<sp/>msgToClient.size()+1);</highlight><highlight class="comment">//c_string<sp/>:<sp/>string+&apos;\0&apos;//char<sp/>*str<sp/>=<sp/>s;<sp/>//<sp/>error:<sp/>can&apos;t<sp/>initialize<sp/>a<sp/>char*<sp/>from<sp/>a<sp/>string<sp/>//<sp/>const<sp/>char<sp/>*str<sp/>=<sp/>s.c_str();<sp/>//<sp/>ok</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Se<sp/>debe<sp/>sumar<sp/>+1<sp/>al<sp/>final</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>server.send(reply);</highlight><highlight class="comment">//envía<sp/>el<sp/>mensaje<sp/>&quot;Block<sp/>received&quot;<sp/>en<sp/>formato<sp/>const<sp/>char<sp/>[]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_prof=1;</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ind_buffer=0;</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>num_prof<sp/>=<sp/>num_prof<sp/>+<sp/>1;</highlight><highlight class="comment">//recibirá<sp/>un<sp/>bloque<sp/>con<sp/>dos<sp/>marcas<sp/>diferentes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt_subprof=0;</highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/**************Almacenar<sp/>data<sp/>recibida<sp/>en<sp/>TempAcqNIDobleBuffer<sp/>con<sp/>la<sp/>cabecera<sp/>aa<sp/>aa<sp/>aa<sp/>am********************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cnt_subprof==0){<sp/></highlight><highlight class="comment">//<sp/>El<sp/>primer<sp/>perfil<sp/>del<sp/>bloque<sp/>con<sp/>cabecera<sp/>pero<sp/>sin<sp/>0x41<sp/>y<sp/>0x42</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy((uint16_t<sp/>*)(TempAcqNIDoubleBuffer+ind_buffer),buffer_rcv_2,size_rcv_buf-2);</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ind_buffer<sp/>+=<sp/>size_rcv_buf_2;</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy((uint16_t<sp/>*)(TempAcqNIDoubleBuffer+ind_buffer),(uint16_t<sp/>*)(buffer_rcv_2+2),size_rcv_buf-6);</highlight><highlight class="comment">//buffer_rcv_2+2<sp/>le<sp/>sacan<sp/>los<sp/>dos<sp/>shorts<sp/>de<sp/>cabecera<sp/>,<sp/>size_rcv_buf-6<sp/>eliminida<sp/>los<sp/>6<sp/>bytes<sp/>de<sp/>cabecera<sp/>en<sp/>el<sp/>tamaño</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ind_buffer<sp/>+=<sp/>size_rcv_buf_2-2;</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt_subprof++;</highlight><highlight class="comment">//contador<sp/>de<sp/>paquetes<sp/>(muestras)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Lost<sp/>packet:<sp/>%i\n&quot;</highlight><highlight class="normal">,<sp/>dif_mark);</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Mark_prev:<sp/>%x\n&quot;</highlight><highlight class="normal">,<sp/>prev_mark);</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Mark_new:<sp/>%x\n&quot;</highlight><highlight class="normal">,<sp/>new_mark);</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.DESHAB_TRANS_COMMAND();</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exit(1);</highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev_mark<sp/>=<sp/>new_mark;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>actualizar<sp/>la<sp/>marca<sp/>anterior</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="879"><highlight class="normal">};</highlight></codeline>
<codeline lineno="880"><highlight class="normal"></highlight></codeline>
<codeline lineno="881"><highlight class="normal"></highlight><highlight class="comment">//**********<sp/>Ejecuta<sp/>el<sp/>método<sp/>InternalCallback<sp/>mediante<sp/>el<sp/>objeto<sp/>seleccionado<sp/>por<sp/>this.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="882"><highlight class="normal"></highlight><highlight class="comment">//el<sp/>cual<sp/>:Guarda<sp/>la<sp/>data<sp/>adquirida<sp/>sin<sp/>marca<sp/>en<sp/>m_AcqBuffer[0]<sp/>y<sp/>ordena<sp/>el<sp/>comienzo<sp/>del<sp/>procesamiento<sp/>y<sp/>guardado<sp/>en<sp/>disco</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="883" refid="class__JARSControl_1a7ee41ba1eaf9a77999e55fcda1660cf2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="class__JARSControl_1a7ee41ba1eaf9a77999e55fcda1660cf2" kindref="member">_JARSControl::InternalCallbackFunc</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>This)<sp/>{</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="class__JARSControl" kindref="compound">_JARSControl</ref><sp/>*)This)-&gt;InternalCallback();<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="885"><highlight class="normal">}</highlight></codeline>
<codeline lineno="886"><highlight class="normal"></highlight></codeline>
<codeline lineno="887"><highlight class="normal"></highlight><highlight class="comment">//Guarda<sp/>la<sp/>data<sp/>adquirida<sp/>sin<sp/>marca<sp/>en<sp/>m_AcqBuffer[0]<sp/>y<sp/>ordena<sp/>el<sp/>comienzo<sp/>del<sp/>procesamiento<sp/>y<sp/>guardado<sp/>en<sp/>disco</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="888" refid="class__JARSControl_1a96cc4161869c0e963d31fd2d462f7f01" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class__JARSControl_1a96cc4161869c0e963d31fd2d462f7f01" kindref="member">_JARSControl::InternalCallback</ref>(){</highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ClientValue=</highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>TmInit,TmFinal;</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>client<sp/>socket</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::socket_t<sp/>client<sp/>(<ref refid="JicaHeader_8h_1acfa1e2b991d398ea406cdd6198bb2ee6" kindref="member">context</ref>,<sp/>ZMQ_PULL);</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>client.connect(</highlight><highlight class="stringliteral">&quot;ipc://5557&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zmq::message_t<sp/>msg;</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::string<sp/>msg_recv;</highlight></codeline>
<codeline lineno="896"><highlight class="normal"></highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t*<sp/>TempAcqNIBuffer=(uint16_t*)JARSControl.m_AcqNIBuffer;</highlight><highlight class="comment">//Puntero<sp/>al<sp/>buffer<sp/>grande<sp/>NI,JARSControl.m_AcqNIBuffer,con<sp/>la<sp/>data<sp/>adquirida<sp/>previamente<sp/>por<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>el<sp/>thread<sp/>InternalThreadEntry</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>prev_mark;</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(;;){</highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>client.recv(&amp;msg);</highlight><highlight class="comment">//recive<sp/>el<sp/>mensaje<sp/>&quot;Block<sp/>received&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg_recv<sp/>=<sp/>string(static_cast&lt;char*&gt;(msg.data()),<sp/>msg.size());</highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//guarda<sp/>la<sp/>marca<sp/>para<sp/>su<sp/>verificación<sp/>ya<sp/>que<sp/>adquiere<sp/>el<sp/>thread<sp/>anterior<sp/>y<sp/>guarda<sp/>en<sp/>este<sp/>thread<sp/>&quot;simultaneamente&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev_mark<sp/>=<sp/>TempAcqNIBuffer[1];</highlight><highlight class="comment">//TempAcqNIBuffer[1]=<sp/>0xam<sp/>0xaa</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(TempAcqNIBuffer[0]==(0xFFFF&amp;JARSControl.m_MarkRe)){</highlight><highlight class="comment">//m_MarkRe=-21846//1010101010101010(0xaa<sp/>0xaa)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ClientValue=</highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.RemoveMark();</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*******verifica<sp/>si<sp/>el<sp/>bloque<sp/>adquirido<sp/>del<sp/>anterior<sp/>thread<sp/>es<sp/>correcto</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(TempAcqNIBuffer[1]!=prev_mark){<sp/></highlight><highlight class="comment">//<sp/>Error<sp/>producido<sp/>cuando<sp/>los<sp/>datos<sp/>se<sp/>actualizan<sp/>al<sp/>escribir<sp/>en<sp/>disco</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Incorrect<sp/>data\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.DESHAB_TRANS_COMMAND();<sp/></highlight><highlight class="comment">//*******FALTA</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>flagError=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exit(1);</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ClientValue<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight><highlight class="comment">//no<sp/>save<sp/>data<sp/>(atributo<sp/>que<sp/>se<sp/>define<sp/>para<sp/>la<sp/>función<sp/>MyCallbackFunction</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*********ptrFunc:<sp/>Arreglo<sp/>de<sp/>funciones<sp/>definido<sp/>en<sp/>main<sp/>que<sp/>inicializa<sp/>el<sp/>procesamiento<sp/>y<sp/>lo<sp/>guarda<sp/>en<sp/>disco<sp/>con<sp/>fwrite</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Tiempo<sp/>de<sp/>demora<sp/>de<sp/>procesamiento<sp/>y<sp/>guardado<sp/>en<sp/>disco<sp/>de<sp/>la<sp/>data<sp/>adquirida</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(JARSControl.<ref refid="class__JARSControl_1a83109c7d938a17dcd5344b8984489490" kindref="member">ptrFunc</ref>!=NULL)</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARSControl.<ref refid="class__JARSControl_1a83109c7d938a17dcd5344b8984489490" kindref="member">ptrFunc</ref>(ClientValue);</highlight><highlight class="comment">//ClientValue<sp/>=<sp/>true<sp/>da<sp/>inicio<sp/>a<sp/>la<sp/>función<sp/>MyCallbackFunction.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Tiempo<sp/>que<sp/>se<sp/>demora<sp/>en<sp/>adquirir<sp/>y<sp/>guardar(jicaheader-fwite)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Almacenamiento<sp/>en<sp/>disco<sp/>en<sp/>%ld<sp/>milisegundos\n&quot;</highlight><highlight class="normal">,TmFinal-TmInit);</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>client.close();</highlight><highlight class="comment">//The<sp/>zmq_close()<sp/>function<sp/>shall<sp/>destroy<sp/>the<sp/>socket<sp/>referenced<sp/>by<sp/>the<sp/>socket<sp/>argument</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="926"><highlight class="normal">};</highlight></codeline>
<codeline lineno="927"><highlight class="normal"></highlight></codeline>
<codeline lineno="928"><highlight class="normal"></highlight><highlight class="comment">//***********<sp/>Remueve<sp/>la<sp/>marca<sp/>y<sp/>guarda<sp/>la<sp/>data<sp/>adquirida<sp/>por<sp/>bloque<sp/>en<sp/>*TempAcqBuffer=*m_AcqBuffer[0]<sp/>sin<sp/>marca</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_JARSControl::RemoveMark()</highlight></codeline>
<codeline lineno="930"><highlight class="normal">{</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>complex&lt;short&gt;*<sp/>TempAcqNIBuffer=(complex&lt;short&gt;*)m_AcqNIBuffer;</highlight><highlight class="comment">//buffer<sp/>separado<sp/>con<sp/>marca</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>complex&lt;short&gt;*<sp/>TempAcqBuffer=(complex&lt;short&gt;*)m_AcqBuffer;</highlight><highlight class="comment">//buffer<sp/>separado<sp/>sin<sp/>marca</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Samples=MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1a19a6cf532b877478838544bb8471c53b" kindref="member">m_nSamples</ref>;</highlight><highlight class="comment">//NSA<sp/>de<sp/>.racp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Channels=MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1a2fc99bf00c5551764122a0924a1df888" kindref="member">m_nChannels</ref>;</highlight><highlight class="comment">//canales<sp/>del<sp/>.racp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>NTX=MyExpParam-&gt;<ref refid="classExpParameters_1a3101e02498e631d62ed0a08bbdd97ce4" kindref="member">MyGRCParam</ref>.<ref refid="struct__GlobRCParam_1a3266169525e2a7d77be441ba398a105a" kindref="member">FixRCP</ref>.<ref refid="struct__RadarControllerParam_1a11c44c04097c6e7a89f0f4c1c6b92f2d" kindref="member">m_nNTX</ref>;</highlight><highlight class="comment">//IPPs<sp/>por<sp/>synchr<sp/>del<sp/>.racp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>Profiles=MyExpParam-&gt;<ref refid="classExpParameters_1ad295cabf051467354884f7dc952aced6" kindref="member">MySystemParam</ref>.<ref refid="struct__SystemParam_1ab86ec2eb0141deaa322b4d78c975dd25" kindref="member">m_nProfiles</ref>;</highlight><highlight class="comment">//ACQUIRED<sp/>PROFILES<sp/>del<sp/>.racp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>jump=Samples*Channels*NTX;</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>jumpInBytes=<sp/>jump*4;</highlight><highlight class="comment">//1<sp/>muestra<sp/>en<sp/>formato<sp/>complex&lt;short&gt;<sp/>tiene<sp/>4<sp/>bytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*******************Copia<sp/>lo<sp/>que<sp/>hay<sp/>en<sp/>el<sp/>buffer<sp/>grande<sp/>total<sp/>m_nNIBuffer<sp/>en<sp/>en<sp/>AcqBuffer[0]************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//************Copia<sp/>desde<sp/>la<sp/>posición<sp/>1<sp/>de<sp/>TempAcqNIBuffer<sp/>,<sp/>que<sp/>es<sp/>de<sp/>donde<sp/>comienza<sp/>la<sp/>data<sp/>adquirida****</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=0;i&lt;Profiles/NTX;i++)</highlight><highlight class="comment">//perfiles<sp/>adquiridos<sp/>en<sp/>cada<sp/>synchro</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(&amp;TempAcqBuffer[i*jump],&amp;TempAcqNIBuffer[i*(jumpInBytes+m_NumMarks)+m_NumMarks],jumpInBytes);</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight><highlight class="comment">//guardo<sp/>los<sp/>perfiles<sp/>con<sp/>tamaño<sp/>jump<sp/>(ChHP)<sp/>hasta<sp/>completar<sp/>un<sp/>bloque</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="944"><highlight class="normal">}</highlight></codeline>
<codeline lineno="945"><highlight class="normal"></highlight></codeline>
<codeline lineno="946"><highlight class="normal"></highlight><highlight class="comment">//********************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="947"><highlight class="normal"></highlight><highlight class="comment">//*******************************************<sp/>Define<sp/>clase<sp/>sp601_command<sp/>*********************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="948"><highlight class="normal"></highlight><highlight class="comment">//Array<sp/>of<sp/>structures:<sp/>{const<sp/>char<sp/>*name,char<sp/>val,char<sp/>size,bool<sp/>ack}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="949" refid="JarsControl_8h_1aaef9d5a8a094f6486db3073c3ee31464" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structjars__cmd" kindref="compound">jars_cmd</ref><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152" kindref="member">JARS_CMD</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a7316843e88740cd819c6427a7f833df6" kindref="member">NOOP</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;NOOP&quot;</highlight><highlight class="normal">,0,0,</highlight><highlight class="keyword">false</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>No<sp/>effect<sp/>or<sp/>ACK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abff6b2d1371663911c20d04738892bfd" kindref="member">SET_SP601_IP</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;SET_SP601_IP&quot;</highlight><highlight class="normal">,1,4,</highlight><highlight class="keyword">true</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>IP<sp/>address<sp/>for<sp/>SP601.<sp/>No<sp/>ACK<sp/>since<sp/>we<sp/>might<sp/>not<sp/>be<sp/>able<sp/>to<sp/>see<sp/>it<sp/>if<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>COMMS_IP<sp/>has<sp/>not<sp/>been<sp/>setup</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a578a2dc0f32dacf50c510f7009c12d1f" kindref="member">SET_SP601_PORT</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;SET_SP601_PORT&quot;</highlight><highlight class="normal">,2,2,</highlight><highlight class="keyword">true</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>Port<sp/>address<sp/>for<sp/>SP601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a9dd105b07676790bd963c49f607588b9" kindref="member">GET_SP601_MAC</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;GET_SP601_MAC&quot;</highlight><highlight class="normal">,3,6,</highlight><highlight class="keyword">true</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>MAC<sp/>address<sp/>for<sp/>SP601.<sp/>Note<sp/>that<sp/>we<sp/>don&apos;t<sp/>get<sp/>to<sp/>SET<sp/>this.<sp/>It&apos;s<sp/>done<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>in<sp/>HW<sp/>through<sp/>DIP<sp/>switches</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abd7b2f700ca4ef2b11180557059e6bbd" kindref="member">SET_COMMS_IP</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;SET_COMMS_IP&quot;</highlight><highlight class="normal">,4,4,</highlight><highlight class="keyword">true</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>IP<sp/>address<sp/>for<sp/>communication<sp/>PC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a57446329e1b880f1e79096d89ca90abf" kindref="member">SET_COMMS_PORT</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;SET_COMMS_PORT&quot;</highlight><highlight class="normal">,5,2,</highlight><highlight class="keyword">true</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>Port<sp/>address<sp/>for<sp/>communication<sp/>PC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152aedb06bfaf37d18638b99cabc860b5c4b" kindref="member">SET_COMMS_MAC</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;SET_COMMS_MAC&quot;</highlight><highlight class="normal">,6,6,</highlight><highlight class="keyword">true</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>MAC<sp/>address<sp/>for<sp/>communication<sp/>PC</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152af2fb94d1fd1739ad68220e57882efa23" kindref="member">GET_VALUE</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;GET_VALUE&quot;</highlight><highlight class="normal">,8,0,</highlight><highlight class="keyword">false</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>different<sp/>values<sp/>stored<sp/>in<sp/>FPGA</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a55636b09cf88b31facd828042757e8cd" kindref="member">DATA_LOOPS</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;DATA_LOOPS&quot;</highlight><highlight class="normal">,63,8,</highlight><highlight class="keyword">false</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Up<sp/>to<sp/>16-bits<sp/>to<sp/>loop<sp/>packet<sp/>sending.<sp/>16-bit<sp/>(effective<sp/>14<sp/>bits<sp/>in<sp/>HW)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>packet<sp/>size.<sp/>This<sp/>is<sp/>used<sp/>to<sp/>test<sp/>for<sp/>bandwidth<sp/>in<sp/>the<sp/>Gigabit<sp/>Connection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;SEND_COMMAND&quot;</highlight><highlight class="normal">,64,3,</highlight><highlight class="keyword">false</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Up<sp/>to<sp/>16-bits<sp/>(effective<sp/>14<sp/>bits<sp/>in<sp/>HW)<sp/>to<sp/>request<sp/>#32-bit<sp/>words<sp/>to<sp/>start<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>burst<sp/>data<sp/>transfer.<sp/>Note,<sp/>due<sp/>to<sp/>IP<sp/>packet<sp/>packaging,<sp/>should<sp/>be<sp/>no<sp/>more<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>than<sp/>367<sp/>words</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a977ee7b118a6816596e05f1c5c6221f2" kindref="member">CHECK_ACK</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;CHECK_ACK&quot;</highlight><highlight class="normal">,65,1,</highlight><highlight class="keyword">false</highlight><highlight class="normal">},<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ack-command</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a28b6b130f7a5b8cdbee96bb17ef151af" kindref="member">SEND_FILTER</ref>]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="stringliteral">&quot;SEND_FILTER&quot;</highlight><highlight class="normal">,66,0,</highlight><highlight class="keyword">false</highlight><highlight class="normal">}<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Send<sp/>filter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="962"><highlight class="normal">};</highlight></codeline>
<codeline lineno="963"><highlight class="normal"></highlight></codeline>
<codeline lineno="964" refid="classsp601__command_1ab96dc6299f8ee6dd7bde84584ea72d5f" refkind="member"><highlight class="normal"><ref refid="classsp601__command_1ab96dc6299f8ee6dd7bde84584ea72d5f" kindref="member">sp601_command::sp601_command</ref>()</highlight></codeline>
<codeline lineno="965"><highlight class="normal">{}</highlight></codeline>
<codeline lineno="966"><highlight class="normal"></highlight></codeline>
<codeline lineno="967" refid="classsp601__command_1a4acdc1e7593b27a8831b0bea12e27aa5" refkind="member"><highlight class="normal"><ref refid="classsp601__command_1a4acdc1e7593b27a8831b0bea12e27aa5" kindref="member">sp601_command::~sp601_command</ref>()</highlight></codeline>
<codeline lineno="968"><highlight class="normal">{}</highlight></codeline>
<codeline lineno="969"><highlight class="normal"></highlight><highlight class="comment">//*****<sp/>Define<sp/>el<sp/>socket<sp/>y<sp/>establece<sp/>las<sp/>direcciones<sp/>de<sp/>los<sp/>puertos,<sp/>la<sp/>MAC<sp/>y<sp/>la<sp/>IP<sp/>de<sp/>la<sp/>Pc<sp/>y<sp/>el<sp/>SP601**********************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="970" refid="classsp601__command_1a00e7747470750f26ba33b69b9a1b028b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classsp601__command_1a00e7747470750f26ba33b69b9a1b028b" kindref="member">sp601_command::init</ref>(<ref refid="structaddress" kindref="compound">address</ref><sp/>host_address)</highlight></codeline>
<codeline lineno="971"><highlight class="normal">{</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//******************<sp/>Convierte<sp/>de<sp/>string<sp/>a<sp/>char*<sp/>la<sp/>ip<sp/>y<sp/>mac<sp/>local<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>mac_size=<sp/>((host_address.<ref refid="structaddress_1a47c83523d9cc06ed386f29e5fcd5eeda" kindref="member">d_mac_block</ref>).<ref refid="structjars__cmd_1a2ac9bbc25760e1a29a170271d68ea390" kindref="member">size</ref>());</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>mac_array_char<sp/>[mac_size+1]={};</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strcpy<sp/>(mac_array_char,(host_address.<ref refid="structaddress_1a47c83523d9cc06ed386f29e5fcd5eeda" kindref="member">d_mac_block</ref>).c_str());</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ip_size=<sp/>((host_address.<ref refid="structaddress_1aacbeb5a1db9cfa6bcabb47d819818b1e" kindref="member">d_ip_host</ref>).<ref refid="structjars__cmd_1a2ac9bbc25760e1a29a170271d68ea390" kindref="member">size</ref>());</highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>ip_array_char<sp/>[ip_size+1]={};</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strcpy<sp/>(ip_array_char,(host_address.<ref refid="structaddress_1aacbeb5a1db9cfa6bcabb47d819818b1e" kindref="member">d_ip_host</ref>).c_str());</highlight></codeline>
<codeline lineno="980"><highlight class="normal"></highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*******************<sp/>Empieza<sp/>el<sp/>envio<sp/>de<sp/>comandos<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>payload[16]={};</highlight><highlight class="comment">//lo<sp/>define<sp/>así<sp/>ya<sp/>que<sp/>usa<sp/>los<sp/>subindices<sp/>para<sp/>contar</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Connecting<sp/>to<sp/>%s...\n&quot;</highlight><highlight class="normal">,<sp/>cfg.<ref refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" kindref="member">SP601_IP</ref>);</highlight><highlight class="comment">//muestra<sp/>la<sp/>IP<sp/>del<sp/>SP601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**************<sp/>Define<sp/>el<sp/>socket<sp/>:<sp/>crea<sp/>,<sp/>direcciona<sp/>y<sp/>configura<sp/>el<sp/>socket<sp/>UDP*****************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1ab2dd9706c8afee0101f9fb673f23a9e1" kindref="member">fpga_con_init</ref>(ip_array_char,host_address.<ref refid="structaddress_1aeeeea32d04a247d4a5351e33af8674a8" kindref="member">d_port_block</ref>);</highlight><highlight class="comment">//Declar<sp/>estos<sp/>valores<sp/>en<sp/>el<sp/>.h<sp/>y<sp/>definirlos<sp/>en<sp/>el<sp/>constructor//char<sp/>*<sp/>IP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Se<sp/>creó<sp/>el<sp/>socket<sp/>UDP<sp/>con<sp/>dirección<sp/>de<sp/>IP<sp/>del<sp/>host<sp/>igual<sp/>a<sp/>:<sp/>%s\n&quot;</highlight><highlight class="normal">,ip_array_char<sp/>);</highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**************<sp/>Envía<sp/>y<sp/>establece<sp/>la<sp/>dirección<sp/>IP<sp/>del<sp/>SP601<sp/>************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//el<sp/>valor<sp/>de<sp/>solo<sp/>los<sp/>números<sp/>de<sp/>la<sp/>dirección<sp/>de<sp/>la<sp/>IP<sp/>es<sp/>guardado<sp/>en<sp/>payload<sp/>de<sp/>tipo<sp/>char</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1ae3793cb02de7605c651d1762415629f8" kindref="member">IPstr_to_bytearray</ref>(cfg.<ref refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" kindref="member">SP601_IP</ref>,<sp/>payload);</highlight></codeline>
<codeline lineno="990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envia<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>IP<sp/>del<sp/>SP601<sp/>al<sp/>SP601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abff6b2d1371663911c20d04738892bfd" kindref="member">SET_SP601_IP</ref>,0,payload,4);</highlight><highlight class="comment">//4<sp/>bytes<sp/>del<sp/>IP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//setea<sp/>a<sp/>cero<sp/>char<sp/>los<sp/>valores<sp/>del<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**************<sp/>Envía<sp/>y<sp/>establece<sp/>la<sp/>dirección<sp/>IP<sp/>de<sp/>la<sp/>PC<sp/>************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//el<sp/>valor<sp/>de<sp/>solo<sp/>los<sp/>números<sp/>de<sp/>la<sp/>dirección<sp/>de<sp/>la<sp/>IP<sp/>es<sp/>guardado<sp/>en<sp/>payload<sp/>de<sp/>tipo<sp/>char</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1ae3793cb02de7605c651d1762415629f8" kindref="member">IPstr_to_bytearray</ref>(ip_array_char,<sp/>payload);<sp/></highlight><highlight class="comment">//valor<sp/>de<sp/>IP-host<sp/>en<sp/>char*<sp/>dado<sp/>por<sp/>el<sp/>GNURadio<sp/>block</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envia<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>IP<sp/>de<sp/>la<sp/>PC<sp/>al<sp/>SP601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abd7b2f700ca4ef2b11180557059e6bbd" kindref="member">SET_COMMS_IP</ref>,0,payload,4);</highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//setea<sp/>a<sp/>cero<sp/>char<sp/>los<sp/>valores<sp/>del<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**************<sp/>Envía<sp/>y<sp/>establece<sp/>la<sp/>MAC<sp/>de<sp/>la<sp/>PC<sp/><sp/>************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Los<sp/>valores<sp/>hexadecimales<sp/>de<sp/>la<sp/>mascará<sp/>de<sp/>la<sp/>PC<sp/>son<sp/>guardados<sp/>en<sp/>payload<sp/>en<sp/>formato<sp/>tipo<sp/>char</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a9fe1a038e1882c74961f61186cc7a811" kindref="member">MACstr_to_bytearray</ref>(mac_array_char,<sp/>payload);<sp/></highlight><highlight class="comment">//<sp/>valor<sp/>del<sp/>MAC<sp/>-host<sp/>en<sp/>char*<sp/>dado<sp/>por<sp/>el<sp/>GNURadio<sp/>block</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envia<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>MAC<sp/>de<sp/>la<sp/>PC<sp/>al<sp/>SP601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152aedb06bfaf37d18638b99cabc860b5c4b" kindref="member">SET_COMMS_MAC</ref>,0,payload,6);</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//setea<sp/>a<sp/>cero<sp/>char<sp/>los<sp/>valores<sp/>del<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**************<sp/>Envía<sp/>y<sp/>establece<sp/>el<sp/>puerto<sp/>de<sp/>la<sp/>PC<sp/>************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Divide<sp/>el<sp/>puerto<sp/>de<sp/>la<sp/>PC<sp/>y<sp/>lo<sp/>guarda<sp/>en<sp/>el<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(host_address.<ref refid="structaddress_1aeeeea32d04a247d4a5351e33af8674a8" kindref="member">d_port_block</ref>,<sp/>payload,<sp/>2);</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>valor<sp/>del<sp/>puerto<sp/>de<sp/>la<sp/>PC<sp/>al<sp/>SP601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a57446329e1b880f1e79096d89ca90abf" kindref="member">SET_COMMS_PORT</ref>,0,payload,2);</highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//setea<sp/>a<sp/>cero<sp/>char<sp/>los<sp/>valores<sp/>del<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**************<sp/>Envía<sp/>y<sp/>establece<sp/>el<sp/>puerto<sp/>del<sp/>SP601<sp/>************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Divide<sp/>el<sp/>puerto<sp/>de<sp/>la<sp/>SP601<sp/>y<sp/>lo<sp/>guarda<sp/>en<sp/>el<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(cfg.<ref refid="classsp601__config_1af3c1756c00b9954a476698c62911feb7" kindref="member">SP601_PORT</ref>,payload,2);</highlight></codeline>
<codeline lineno="1018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Envía<sp/>el<sp/>valor<sp/>del<sp/>puerto<sp/>de<sp/>la<sp/>SP601<sp/>al<sp/>SP601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>send(<ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a578a2dc0f32dacf50c510f7009c12d1f" kindref="member">SET_SP601_PORT</ref>,0,payload,2);</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//setea<sp/>a<sp/>cero<sp/>char<sp/>los<sp/>valores<sp/>del<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(payload,0,strlen(payload));</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//We<sp/>can<sp/>check<sp/>the<sp/>current<sp/>values<sp/>for<sp/>MAC,<sp/>IP<sp/>and<sp/>PORT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1023"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"></highlight></codeline>
<codeline lineno="1025"><highlight class="normal"></highlight><highlight class="comment">//******************************<sp/>Nos<sp/>da<sp/>el<sp/>número<sp/>de<sp/>bytes<sp/>recibidos</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1026" refid="classsp601__command_1a0f20108067e472db69a628ecb02e2c4a" refkind="member"><highlight class="normal">ssize_t<sp/><ref refid="classsp601__command_1a0f20108067e472db69a628ecb02e2c4a" kindref="member">sp601_command::receive</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buffer_rcv)</highlight></codeline>
<codeline lineno="1027"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ssize_t<sp/>size_rcv_buf<sp/>=<sp/><ref refid="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" kindref="member">fpga_con_recv</ref>(buffer_rcv,<ref refid="JarsControl_8h_1ae6cae658beb94f4ddfcaa58ee33dd38b" kindref="member">RCV_BUFSIZE</ref>);</highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//printf(&quot;Recibido\n&quot;);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>size_rcv_buf;</highlight></codeline>
<codeline lineno="1031"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"></highlight><highlight class="comment">//********************************************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1033"><highlight class="normal"></highlight><highlight class="comment">//*******************************************<sp/>Define<sp/>la<sp/>clase<sp/>fpga_com<sp/>***********************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1034"><highlight class="normal"></highlight><highlight class="comment">//fpga_con_init(&amp;fc,<sp/>cfg.SP601_IP,<sp/>cfg.COMMS_PORT,<sp/>cfg.SP601_PORT)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1035"><highlight class="normal"></highlight><highlight class="comment">//****************************<sp/>Define<sp/>y<sp/>establece<sp/>el<sp/>socket<sp/>con<sp/>las<sp/>caracteísticas<sp/>respectivas******************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1036"><highlight class="normal"></highlight><highlight class="comment">//void<sp/>fpga_con_init(<sp/>fpga_con_t<sp/>*con,<sp/>const<sp/>char<sp/>*daddr,<sp/>int<sp/>lport,<sp/>int<sp/>dport<sp/>)<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1037" refid="JarsControl_8h_1ab2dd9706c8afee0101f9fb673f23a9e1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1ab2dd9706c8afee0101f9fb673f23a9e1" kindref="member">fpga_con_init</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>host,</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>lport<sp/>)<sp/>{<sp/></highlight><highlight class="comment">//(#HOST<sp/>y<sp/>#<sp/>PORT<sp/>llamados<sp/>desde<sp/>el<sp/>bloque)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1038"><highlight class="normal"></highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//********************<sp/>Define<sp/>un<sp/>endpoint<sp/>local<sp/>,<sp/>crea<sp/>y<sp/>abre<sp/>un<sp/>sovlet<sp/>local<sp/>,<sp/>setea<sp/>el<sp/>socket<sp/>local<sp/>y<sp/>lo<sp/>bind<sp/>al<sp/>endpoint<sp/>local</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Creamos<sp/>un<sp/>endpoint:representing<sp/>all<sp/>IP<sp/>addresses<sp/>available<sp/>on<sp/>the<sp/>host<sp/>and<sp/>the<sp/>specified<sp/>port<sp/>number.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>boost::asio::ip::udp::endpoint<sp/>local_endpoint(boost::asio::ip::address_v4::any(),lport);</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Crea<sp/>un<sp/>puntero<sp/>a<sp/>un<sp/>socket</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>boost::asio::ip::udp::socket(<ref refid="JarsControl_8h_1aa6e78a1fa6723425d76b1aae3928fc9b" kindref="member">local_io_service</ref>);</highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref>-&gt;open(local_endpoint.protocol());<sp/></highlight><highlight class="comment">//<sp/>abre<sp/>el<sp/>socket<sp/>especificando<sp/>el<sp/>protocolo<sp/>asociado<sp/>al<sp/>endpoint-udp<sp/>protocolo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*******************************<sp/>Setea<sp/>el<sp/>socket<sp/>*************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>boost::asio::socket_base::reuse_address<sp/>roption(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight><highlight class="comment">//implementa<sp/>la<sp/>opción<sp/>SOL_SOCKET/SO_REUSEADDR<sp/>para<sp/>el<sp/>del<sp/>socket</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref>-&gt;set_option(roption);</highlight><highlight class="comment">//Establece<sp/>la<sp/>opción<sp/>roption<sp/>en<sp/>el<sp/>socket</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>boost::asio::socket_base::receive_buffer_size<sp/>option(2097152);</highlight><highlight class="comment">//Máximo<sp/>valor<sp/>que<sp/>obtendrá<sp/>para<sp/>guardar<sp/>por<sp/>si<sp/>se<sp/>quedan<sp/>=<sp/>2097152</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref>-&gt;set_option(option);</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*****************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref>-&gt;bind(local_endpoint);</highlight><highlight class="comment">//enlaza<sp/>el<sp/>socket<sp/>al<sp/>endpoint<sp/>establecido//<sp/>Le<sp/>da<sp/>al<sp/>socket<sp/>dirección<sp/>y<sp/>puerto<sp/>en<sp/>la<sp/>red</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1052"><highlight class="normal"></highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//************************************<sp/>Define<sp/>un<sp/>endpoint<sp/>de<sp/>destino<sp/><sp/>*************************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>boost::asio::ip::address<sp/>ip_destino<sp/>=<sp/>boost::asio::ip::address::from_string(cfg.<ref refid="classsp601__config_1a67d08111f19266ac84a3781d1c204b6e" kindref="member">sp601_ip_string</ref>);</highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>boost::asio::ip::udp::endpoint<sp/><ref refid="JarsControl_8h_1acc668b68847453065b3681978e25f217" kindref="member">destino_endpoint</ref>(ip_destino,<sp/>cfg.<ref refid="classsp601__config_1af3c1756c00b9954a476698c62911feb7" kindref="member">SP601_PORT</ref>);</highlight></codeline>
<codeline lineno="1056"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"></highlight></codeline>
<codeline lineno="1058"><highlight class="normal"></highlight><highlight class="comment">//<sp/>ssize_t<sp/>is<sp/>the<sp/>same<sp/>as<sp/>size_t,<sp/>but<sp/>is<sp/>a<sp/>signed<sp/>type<sp/>-<sp/>read<sp/>ssize_t<sp/>as<sp/>“signed<sp/>size_t”.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1059"><highlight class="normal"></highlight><highlight class="comment">//ssize_t<sp/>is<sp/>able<sp/>to<sp/>represent<sp/>the<sp/>number<sp/>-1,<sp/>which<sp/>is<sp/>returned<sp/>by<sp/>several<sp/>system<sp/>calls<sp/>and<sp/>library<sp/>functions<sp/>as<sp/>a<sp/>way<sp/>to<sp/>indicate<sp/>error.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1060"><highlight class="normal"></highlight><highlight class="comment">//***************Envía<sp/>los<sp/>paquetes<sp/>de<sp/>datos<sp/>de<sp/>buf<sp/>a<sp/>través<sp/>del<sp/>socket<sp/>especificado<sp/>en<sp/>fpga_con_t********************************************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1061" refid="JarsControl_8h_1a8ec1b8a8eeca1b70875f6a4c037dc3e1" refkind="member"><highlight class="normal">ssize_t<sp/><ref refid="JarsControl_8h_1a8ec1b8a8eeca1b70875f6a4c037dc3e1" kindref="member">fpga_con_send</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*buf,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>len<sp/>)<sp/>{<sp/></highlight><highlight class="comment">//ssize_t<sp/>,<sp/>is<sp/>read<sp/>signed<sp/>size_t<sp/>,<sp/>which<sp/>can<sp/>give<sp/>us<sp/>-1<sp/>as<sp/>an<sp/>error.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1062"><highlight class="normal"></highlight><highlight class="comment">/*The<sp/>sendto<sp/>function<sp/>transmits<sp/>the<sp/>data<sp/>in<sp/>the<sp/>buffer<sp/>through<sp/>the<sp/>socket<sp/>socket<sp/>to<sp/>the<sp/>destination</highlight></codeline>
<codeline lineno="1063"><highlight class="comment"><sp/>address<sp/>specified<sp/>by<sp/>the<sp/>addr<sp/>and<sp/>length<sp/>arguments.<sp/>The<sp/>size<sp/>argument<sp/>specifies<sp/>the<sp/>number<sp/>of<sp/>bytes<sp/>to</highlight></codeline>
<codeline lineno="1064"><highlight class="comment"><sp/>be<sp/>transmitted.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1065"><highlight class="normal"></highlight></codeline>
<codeline lineno="1066"><highlight class="normal"><sp/><sp/><sp/><sp/>ssize_t<sp/>bytes_send<sp/>=<sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref>-&gt;send_to(boost::asio::buffer(buf,<sp/>len),<sp/><ref refid="JarsControl_8h_1acc668b68847453065b3681978e25f217" kindref="member">destino_endpoint</ref>);</highlight><highlight class="comment">//(void*)<sp/>buf//se<sp/>puede<sp/>quitar<sp/>el<sp/>boost::asio::buffer<sp/>pero<sp/>al<sp/>ver<sp/>GNURadio<sp/>UDP<sp/>sink<sp/>y<sp/>source<sp/>lo<sp/>usan<sp/>sin<sp/>problemas</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1067"><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bytes_send<sp/>&lt;<sp/>0<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Error<sp/>en<sp/>el<sp/>envío.<sp/>Revisar<sp/>fpga_con_send\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>bytes_send;</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1073"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1074"><highlight class="normal"></highlight></codeline>
<codeline lineno="1075"><highlight class="normal"></highlight><highlight class="comment">/*blocking<sp/>receive:<sp/>this<sp/>call<sp/>will<sp/>block<sp/>until<sp/>a<sp/>packet<sp/>is<sp/>received*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1076"><highlight class="normal"></highlight><highlight class="comment">//******************<sp/>Recibirá<sp/>data<sp/>y<sp/>luego<sp/>lo<sp/>bloqueará<sp/>hasta<sp/>que<sp/>haya<sp/>alguna<sp/>data<sp/>por<sp/>leer*********************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1077" refid="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" refkind="member"><highlight class="normal">ssize_t<sp/><ref refid="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" kindref="member">fpga_con_recv</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*dbuf,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>dsize<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"></highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ssize_t<sp/>bytes_receive<sp/>=<sp/><ref refid="JarsControl_8h_1a422d981f24f5424243f875df0a9ade6b" kindref="member">local_socket</ref>-&gt;receive(boost::asio::buffer(dbuf,<sp/>dsize));</highlight><highlight class="comment">//no<sp/>se<sp/>especificó<sp/>en<sp/>endpoint<sp/>de<sp/>envío</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1080"><highlight class="normal"></highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bytes_receive<sp/>&lt;<sp/>0<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Error<sp/>en<sp/>la<sp/>recepción.<sp/>Revisar<sp/>fpga_con_recv\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>bytes_receive;</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"></highlight></codeline>
<codeline lineno="1086"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"></highlight></codeline>
<codeline lineno="1088"><highlight class="normal"></highlight><highlight class="comment">//void<sp/>send(uint8_t<sp/>cmd,<sp/>char<sp/>code,<sp/>const<sp/>char<sp/>*payload,char<sp/>size_payload)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1089"><highlight class="normal"></highlight><highlight class="comment">//void<sp/>send(uint8_t<sp/>cmd,<sp/>char<sp/>code,<sp/>const<sp/>char<sp/>*payload,size_t<sp/>size_payload)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1090"><highlight class="normal"></highlight><highlight class="comment">//void<sp/>sp601_command::send(uint8_t<sp/>cmd,<sp/>char<sp/>code,<sp/>const<sp/>char<sp/>*payload,<sp/>char<sp/>size_payload)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1091"><highlight class="normal"></highlight><highlight class="comment">//**********************Dependiendo<sp/>del<sp/>cmd<sp/>y<sp/>el<sp/>payload<sp/>genera<sp/>el<sp/>buffer<sp/>que<sp/>guardará<sp/>el<sp/>comando<sp/>de<sp/>envio:<sp/>cmd_array**************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1092"><highlight class="normal"></highlight><highlight class="comment">//**********************Genera<sp/>el<sp/>buffer<sp/>que<sp/>guardará<sp/>el<sp/>paquete<sp/>de<sp/>data<sp/>recibido:<sp/>buffer_rcv**************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1093"><highlight class="normal"></highlight><highlight class="comment">//**********************Verifica<sp/>los<sp/>buffers<sp/>creados<sp/>imprimiéndolos<sp/>(printf)******************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1094"><highlight class="normal"></highlight><highlight class="comment">//**********************<sp/>Envía<sp/>el<sp/>comando<sp/>respectivo<sp/>(PC-&gt;SP601)<sp/>y<sp/>recibe<sp/>el<sp/>comando<sp/>de<sp/>respuesta<sp/>(SP601-&gt;PC)<sp/>/Revisar<sp/>Excel*******************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1095" refid="classsp601__command_1a190c6be31617bd6b50fc7f4a451a56ac" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classsp601__command_1a190c6be31617bd6b50fc7f4a451a56ac" kindref="member">sp601_command::send</ref>(uint8_t<sp/>cmd,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>code,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*payload,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_payload)</highlight></codeline>
<codeline lineno="1096"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>cmd_array[16];</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>buffer_rcv[<ref refid="JarsControl_8h_1ae6cae658beb94f4ddfcaa58ee33dd38b" kindref="member">RCV_BUFSIZE</ref>];</highlight><highlight class="comment">//buffer<sp/>donde<sp/>se<sp/>guardará<sp/>el<sp/>mensaje<sp/>que<sp/>recibe</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>size_rcv_buf=0;</highlight></codeline>
<codeline lineno="1100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ack_received;</highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//char<sp/>size_payload;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size_cmd_array;</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>*info_str;</highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//define<sp/>VERBOSE_MODE<sp/>para<sp/>el<sp/>objeto<sp/>cfg</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="classsp601__config_1a6d8f61af0597bc1c6ca208898fc76f77" kindref="member">VERBOSE_MODE</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight><highlight class="comment">//********</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//printf(&quot;%i\n&quot;,payload[0]);printf(&quot;%i\n&quot;,payload[1]);printf(&quot;%i\n&quot;,payload[2]);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//size_payload<sp/>=<sp/>strlen(payload);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//size_payload<sp/>=<sp/>payload.__size;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//printf(&quot;%i&quot;,size_payload);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>size_cmd_array<sp/>=<sp/>3+size_payload;</highlight><highlight class="comment">//tamaño<sp/>total<sp/>después<sp/>de<sp/>agregar<sp/>cmd_array[0],[1],[2]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//printf(&quot;%i&quot;,size_cmd_array);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//****************************<sp/>Crea<sp/>el<sp/>buffer<sp/>de<sp/>comando<sp/>cmd_array<sp/>************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_array[0]<sp/>=<sp/>JARS_CMD[cmd].<ref refid="structjars__cmd_1a08d03301fdc843da88b71ab8d5576a97" kindref="member">val</ref>;</highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_array[1]<sp/>=<sp/>code;</highlight><highlight class="comment">//siempre<sp/>será<sp/>cero<sp/>aparentemente</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_array[2]<sp/>=<sp/>JARS_CMD[cmd].<ref refid="structjars__cmd_1a2ac9bbc25760e1a29a170271d68ea390" kindref="member">size</ref>;</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//guarda<sp/>el<sp/>valor<sp/>de<sp/>payload<sp/>,del<sp/>tamaño<sp/>de<sp/>size_payload,a<sp/>partir<sp/>de<sp/>cmd_array[3]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(cmd_array+3,payload,size_payload);</highlight><highlight class="comment">//Completa:<sp/>val,code,size,direccion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**************envia<sp/>los<sp/>paquetes<sp/>de<sp/>datos<sp/>del<sp/>arreglo<sp/>cmd_array<sp/>a<sp/>través<sp/>del<sp/>socket</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a8ec1b8a8eeca1b70875f6a4c037dc3e1" kindref="member">fpga_con_send</ref>(cmd_array,size_cmd_array);</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1120"><highlight class="normal"></highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ack_received<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight><highlight class="comment">//*******</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//crea<sp/>el<sp/>buffer<sp/>de<sp/>adquisición<sp/>si<sp/>el<sp/>ack<sp/>es<sp/>true</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(JARS_CMD[cmd].<ref refid="structjars__cmd_1a667569fb6dd6e6bc0b0699d0e1a49b22" kindref="member">ack</ref>)</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>size_rcv_buf<sp/>=<sp/><ref refid="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" kindref="member">fpga_con_recv</ref>(buffer_rcv,<ref refid="JarsControl_8h_1ae6cae658beb94f4ddfcaa58ee33dd38b" kindref="member">RCV_BUFSIZE</ref>);</highlight><highlight class="comment">//pone<sp/>el<sp/>valor<sp/>en<sp/>bytes<sp/>del<sp/>buffer<sp/>receptor<sp/>1472</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ack_received<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight><highlight class="comment">//******</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"></highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*************************<sp/>Da<sp/>valor<sp/>al<sp/>arreglo<sp/>info_str<sp/>dependiendo<sp/>del<sp/>tipo<sp/>de<sp/>configuración<sp/>****************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//******PAsa<sp/>de<sp/>char<sp/>[]<sp/>a<sp/>uint8_t</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(cmd)<sp/>{</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abff6b2d1371663911c20d04738892bfd" kindref="member">SET_SP601_IP</ref>:<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Guarda<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>IP<sp/>del<sp/>SP601<sp/>en<sp/>formato<sp/>literal<sp/>string<sp/>en<sp/>info_str<sp/>para<sp/>mostrar<sp/>en<sp/>pantalla</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a0a6858dd58a8b8b154e5dd149fafd01d" kindref="member">bytearray_to_IPstr</ref>(payload,cfg.<ref refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" kindref="member">SP601_IP</ref>);</highlight><highlight class="comment">//pasa<sp/>los<sp/>números<sp/>de<sp/>char<sp/>a<sp/>int<sp/>de<sp/>la<sp/>IP<sp/><sp/>y<sp/>los<sp/>guarda<sp/>en<sp/>formato<sp/>...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(strlen(cfg.<ref refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" kindref="member">SP601_IP</ref>)+1);</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(info_str,cfg.<ref refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" kindref="member">SP601_IP</ref>,strlen(cfg.<ref refid="classsp601__config_1ad6492c0298daa685d0ba7dfc38a85b14" kindref="member">SP601_IP</ref>)+1);</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a578a2dc0f32dacf50c510f7009c12d1f" kindref="member">SET_SP601_PORT</ref>:<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Guarda<sp/>el<sp/>valor<sp/>del<sp/>puerto<sp/>en<sp/>info_str<sp/>(char)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a19a52ae0d3c91c019542bc76a720aef9" kindref="member">bytearray_to_int</ref>(payload,cfg.<ref refid="classsp601__config_1af3c1756c00b9954a476698c62911feb7" kindref="member">SP601_PORT</ref>);</highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(10);</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a44ec176a02a62ada468ebde1b3f6e9f0" kindref="member">itoa</ref>(cfg.<ref refid="classsp601__config_1af3c1756c00b9954a476698c62911feb7" kindref="member">SP601_PORT</ref>,(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)info_str,10);</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152abd7b2f700ca4ef2b11180557059e6bbd" kindref="member">SET_COMMS_IP</ref>:<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Guarda<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>IP<sp/>de<sp/>la<sp/>PC<sp/>en<sp/>formato<sp/>literal<sp/>string<sp/>en<sp/>info_str<sp/>para<sp/>mostrar<sp/>en<sp/>pantalla</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a0a6858dd58a8b8b154e5dd149fafd01d" kindref="member">bytearray_to_IPstr</ref>(payload,cfg.<ref refid="classsp601__config_1a5f4214fdc2d5b4cc6cf2665ad6233838" kindref="member">IP_host</ref>);</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(strlen(cfg.<ref refid="classsp601__config_1a5f4214fdc2d5b4cc6cf2665ad6233838" kindref="member">IP_host</ref>)+1);</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(info_str,cfg.<ref refid="classsp601__config_1a5f4214fdc2d5b4cc6cf2665ad6233838" kindref="member">IP_host</ref>,strlen(cfg.<ref refid="classsp601__config_1a5f4214fdc2d5b4cc6cf2665ad6233838" kindref="member">IP_host</ref>)+1);</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a57446329e1b880f1e79096d89ca90abf" kindref="member">SET_COMMS_PORT</ref>:<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Guarda<sp/>el<sp/>valor<sp/>del<sp/>puerto<sp/>en<sp/>info_str<sp/>(char)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a19a52ae0d3c91c019542bc76a720aef9" kindref="member">bytearray_to_int</ref>(payload,cfg.<ref refid="classsp601__config_1aa8d75acd776756f7b46560c340a4817d" kindref="member">PORT_host</ref>);</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//printf(&quot;%i\n&quot;,<sp/>cfg.COMMS_PORT);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(10);</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//guarda<sp/>el<sp/>valor<sp/>del<sp/>puerto<sp/>en<sp/>info_str<sp/>(char)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Lo<sp/>cambia<sp/>de<sp/>int<sp/>a<sp/>char<sp/>para<sp/>mostrarlo<sp/>como<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a44ec176a02a62ada468ebde1b3f6e9f0" kindref="member">itoa</ref>(cfg.<ref refid="classsp601__config_1aa8d75acd776756f7b46560c340a4817d" kindref="member">PORT_host</ref>,(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)info_str,10);</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152aedb06bfaf37d18638b99cabc860b5c4b" kindref="member">SET_COMMS_MAC</ref>:<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//****Guarda<sp/>el<sp/>valor<sp/>de<sp/>la<sp/>MAC<sp/>de<sp/>la<sp/>PC<sp/>en<sp/>formato<sp/>literal<sp/>string<sp/>en<sp/>info_str<sp/>para<sp/>mostrar<sp/>en<sp/>pantalla</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="JarsControl_8h_1a186f7c0fc2f44b39853cd79d8daa6b65" kindref="member">bytearray_to_MACstr</ref>(payload,cfg.<ref refid="classsp601__config_1a2c2cf407fda2eff4bfb66c2624105c7f" kindref="member">MAC_host</ref>);</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(strlen(cfg.<ref refid="classsp601__config_1a2c2cf407fda2eff4bfb66c2624105c7f" kindref="member">MAC_host</ref>)+1);</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memcpy(info_str,cfg.<ref refid="classsp601__config_1a2c2cf407fda2eff4bfb66c2624105c7f" kindref="member">MAC_host</ref>,strlen(cfg.<ref refid="classsp601__config_1a2c2cf407fda2eff4bfb66c2624105c7f" kindref="member">MAC_host</ref>)+1);</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a685f467976dffd4af61e2c198bba3e07" kindref="member">SEND_COMMAND</ref>:</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//*******************<sp/>Creará<sp/>un<sp/>arreglo(info_str)<sp/>donde<sp/>se<sp/>guardará<sp/>el<sp/>estado<sp/>del<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>JARS:RST_CTRL,RST_CTRL,SELECT_RXD,POWER_RXD,PROG_RXD,ENABLE_TRANSF,DISABLE_TRANSF************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//**********<sp/>Recibirá<sp/>el<sp/>primer<sp/>paquete<sp/>de<sp/>datos<sp/>mediante<sp/>recv()*****************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-----------Verifica<sp/>mediante<sp/>el<sp/>payload[1]<sp/>que<sp/>se<sp/>haya<sp/>enviado<sp/>el<sp/>modo<sp/>correcto<sp/>de<sp/>configuración------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(10);</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(info_str,0,10);</highlight><highlight class="comment">//define<sp/>el<sp/>espacio<sp/>de<sp/>memoria<sp/>info_str<sp/>con<sp/>10<sp/>ceros.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Crea<sp/>un<sp/>indicador<sp/>que<sp/>define<sp/>el<sp/>arreglo<sp/>de<sp/>estados<sp/>info_str</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>cmd_acq;</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_acq<sp/>=<sp/>(payload[1]&gt;&gt;4)&amp;15;</highlight><highlight class="comment">//parece<sp/>que<sp/>el<sp/>payload<sp/>guarda<sp/>el<sp/>comando<sp/>de<sp/>estado</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cmd_acq==<ref refid="JarsControl_8h_1a1aa9678f48f9b9661062c9246e64993a" kindref="member">RST_CTRL</ref>)<sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;RST_CTRL&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//else<sp/>if(cmd_acq==MODE_OPER)<sp/>sprintf((char<sp/>*)(info_str),<sp/>&quot;%s&quot;,<sp/>&quot;RST_CTRL&quot;);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cmd_acq==<ref refid="JarsControl_8h_1a52e278dd9e601652e8ab11b70c53ef6e" kindref="member">MODE_OPER</ref>)<sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MODE_OPER&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cmd_acq==<ref refid="JarsControl_8h_1ab8923675701bbbb7f51c4e68fac5e588" kindref="member">ELECTION_RXD</ref>)<sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;SELECT_RXD&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cmd_acq==<ref refid="JarsControl_8h_1a063240a0c681e13158e249f55ac4b750" kindref="member">POWER_RXD</ref>)<sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;POWER_RXD&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cmd_acq==<ref refid="JarsControl_8h_1aefde68a634d66b7039aa56de3fd5301b" kindref="member">PROG_RXD</ref>)<sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;PROG_RXD&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cmd_acq==<ref refid="JarsControl_8h_1ad7e5e3b2ac85d92fe9b81bac2368ca02" kindref="member">ENABLE_TRANSF</ref>)<sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ENABLE_TRANSF&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(cmd_acq==<ref refid="JarsControl_8h_1aacac2365f297d20c92dac6c32a87c6a3" kindref="member">DISABLE_TRANSF</ref>)<sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;DISABLE_TRANSF&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>value<sp/>returned<sp/>from<sp/>the<sp/>UDP<sp/>receiver<sp/>thread</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>First<sp/>packet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>size_rcv_buf<sp/>=<sp/><ref refid="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" kindref="member">fpga_con_recv</ref>(buffer_rcv,<ref refid="JarsControl_8h_1ae6cae658beb94f4ddfcaa58ee33dd38b" kindref="member">RCV_BUFSIZE</ref>);</highlight><highlight class="comment">//Recibe<sp/>el<sp/>paquete<sp/>en<sp/>el<sp/>buffer<sp/>de<sp/>1472<sp/>bytes<sp/>de<sp/>tamaño</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Revisar<sp/>los<sp/>respectivos<sp/>bits<sp/>de<sp/>buffer_rcv<sp/>para<sp/>colocar<sp/>el<sp/>info_str<sp/>el<sp/>comando<sp/>que<sp/>fue<sp/>enviado</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a55636b09cf88b31facd828042757e8cd" kindref="member">DATA_LOOPS</ref>:</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(10);</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="classsp601__config_1a6d8f61af0597bc1c6ca208898fc76f77" kindref="member">VERBOSE_MODE</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152af2fb94d1fd1739ad68220e57882efa23" kindref="member">GET_VALUE</ref>:</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(10);</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a28b6b130f7a5b8cdbee96bb17ef151af" kindref="member">SEND_FILTER</ref>:</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Recibe<sp/>el<sp/>paquete<sp/>de<sp/>respuesta<sp/>de<sp/>envio<sp/>del<sp/>sp601</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(12);</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memset(info_str,0,12);</highlight><highlight class="comment">//establece<sp/>el<sp/>arreglo<sp/>info_str<sp/>con<sp/>12<sp/>ceros,<sp/>pero<sp/>tipo<sp/>char</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf((</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)(info_str),<sp/></highlight><highlight class="stringliteral">&quot;%s&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;WRITE_FILTER&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>the<sp/>value<sp/>returned<sp/>from<sp/>the<sp/>UDP<sp/>receiver<sp/>thread</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//First<sp/>packet.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>size_rcv_buf<sp/>=<sp/><ref refid="JarsControl_8h_1afd1cbc76708d71bb56dfcaf96eb90eba" kindref="member">fpga_con_recv</ref>(buffer_rcv,<ref refid="JarsControl_8h_1ae6cae658beb94f4ddfcaa58ee33dd38b" kindref="member">RCV_BUFSIZE</ref>);</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Filter<sp/>received\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152a7316843e88740cd819c6427a7f833df6" kindref="member">NOOP</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//No<sp/>muestra<sp/>nada</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>info_str<sp/>=<sp/>(uint8_t<sp/>*)malloc(10);</highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cfg.<ref refid="classsp601__config_1a6d8f61af0597bc1c6ca208898fc76f77" kindref="member">VERBOSE_MODE</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;Error:<sp/>Command<sp/>Not<sp/>Found[%s]\n&quot;</highlight><highlight class="normal">,<sp/>JARS_CMD[cmd].<ref refid="structjars__cmd_1ac1538c1c69d889eefbabfc077e59d96f" kindref="member">name</ref>);</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"></highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//****************<sp/>Imprime<sp/>el<sp/>nombre<sp/>del<sp/>comando<sp/>enviado<sp/>y<sp/>el<sp/>estado<sp/>del<sp/>JARS<sp/>y<sp/>se<sp/>lee<sp/>el<sp/>paquete<sp/>recibido<sp/>en<sp/>formato<sp/>hexadecimal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((cfg.<ref refid="classsp601__config_1a6d8f61af0597bc1c6ca208898fc76f77" kindref="member">VERBOSE_MODE</ref><sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>&amp;&amp;<sp/>(cmd<sp/>!=<sp/><ref refid="JarsControl_8h_1a5a3ca937b4f7181095b415041ac2a152af2fb94d1fd1739ad68220e57882efa23" kindref="member">GET_VALUE</ref>))</highlight></codeline>
<codeline lineno="1210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;%s<sp/>:<sp/>%s\n&quot;,<sp/>JARS_CMD[cmd].name,(uint8_t<sp/>*)info_str);//muestra<sp/>el<sp/>name<sp/>y<sp/>el<sp/>info_str<sp/>en<sp/>uint8_t(uint8_t*<sp/>para<sp/>asegurar)</highlight></codeline>
<codeline lineno="1212"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;Received:<sp/>&quot;);</highlight></codeline>
<codeline lineno="1213"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for(uint16_t<sp/>i<sp/>=<sp/>0<sp/>;<sp/>i&lt;size_rcv_buf<sp/>;<sp/>i++)//numero<sp/>de<sp/>bytes<sp/>leidos<sp/>en<sp/>el<sp/>buffer</highlight></codeline>
<codeline lineno="1214"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1215"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;%02X,&quot;,(uint8_t)buffer_rcv[i]);//Se<sp/>lee<sp/>el<sp/>char<sp/>que<sp/>llega<sp/>en<sp/>formato<sp/>hexadecimal</highlight></codeline>
<codeline lineno="1216"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1217"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;\n&quot;);*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//size_t<sp/>size_info_str<sp/>=<sp/>sizeof(info_str);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//memset(info_str,0,size_info_str);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;el<sp/>valor<sp/>que<sp/>llegó<sp/>fue:<sp/>%s&quot;</highlight><highlight class="normal">,buffer_rcv<sp/>);</highlight></codeline>
<codeline lineno="1221"><highlight class="normal"></highlight></codeline>
<codeline lineno="1222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1223"><highlight class="normal"></highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//****************<sp/>Muestra<sp/>todos<sp/>los<sp/>elementos<sp/>del<sp/>buffer:<sp/>cmd_array<sp/>en<sp/>hexadecimal<sp/>*********************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*if(JARS_CMD[cmd].ack<sp/>&amp;&amp;<sp/>ack_received)</highlight></codeline>
<codeline lineno="1226"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(cfg.VERBOSE_MODE)</highlight></codeline>
<codeline lineno="1227"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1228"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;[OK]<sp/>Validation<sp/>for<sp/>command<sp/>[%s][%i][&quot;,JARS_CMD[cmd].name,code);//code<sp/>sera<sp/>siempre<sp/>cero</highlight></codeline>
<codeline lineno="1229"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for(uint16_t<sp/>i<sp/>=<sp/>0<sp/>;<sp/>i&lt;(size_cmd_array-1)<sp/>;<sp/>i++)</highlight></codeline>
<codeline lineno="1230"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1231"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;%02X,&quot;,(uint8_t)cmd_array[i]);</highlight></codeline>
<codeline lineno="1232"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1233"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;%02X]&quot;,(uint8_t)cmd_array[size_cmd_array-1]);</highlight></codeline>
<codeline lineno="1234"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(&quot;\n&quot;);</highlight></codeline>
<codeline lineno="1235"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1236"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1237"><highlight class="normal"></highlight></codeline>
<codeline lineno="1238"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1239"><highlight class="normal"></highlight></codeline>
<codeline lineno="1240"><highlight class="normal"></highlight><highlight class="comment">//********************<sp/>Métodos<sp/>usados<sp/>por<sp/>swich<sp/>en<sp/>send<sp/>**************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1241"><highlight class="normal"></highlight><highlight class="comment">//***************<sp/>Guarda<sp/>cada<sp/>numero<sp/>de<sp/>la<sp/>IP<sp/>dentro<sp/>del<sp/>arreglo<sp/>parts<sp/>en<sp/>formato<sp/>char<sp/>*******************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1242" refid="JarsControl_8h_1ae3793cb02de7605c651d1762415629f8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1ae3793cb02de7605c651d1762415629f8" kindref="member">IPstr_to_bytearray</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*IPstr,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*parts){</highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<sp/>pch;</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/>uint8_t<sp/>ii=0;</highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/>pch<sp/>=<sp/>strtok<sp/>(IPstr,</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">);</highlight><highlight class="comment">//divide<sp/>el<sp/>IPstr<sp/>,<sp/>dilimitado<sp/>por<sp/>.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(pch<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="1248"><highlight class="normal"><sp/><sp/><sp/><sp/>parts[ii]<sp/>=<sp/>(char)atoi(pch);</highlight><highlight class="comment">//convierte<sp/>string<sp/>a<sp/>int<sp/>y<sp/>luego<sp/>lo<sp/>guarda<sp/>como<sp/>char</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/>pch<sp/>=<sp/>strtok<sp/>(NULL,<sp/></highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1250"><highlight class="normal"><sp/><sp/><sp/><sp/>ii=ii+1;</highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1252"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1253"><highlight class="normal"></highlight></codeline>
<codeline lineno="1254"><highlight class="normal"></highlight><highlight class="comment">//**************************<sp/>Nos<sp/>da<sp/>la<sp/>IP<sp/>en<sp/>forma<sp/>binaria<sp/>y<sp/>string<sp/>****************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1255" refid="JarsControl_8h_1a0a6858dd58a8b8b154e5dd149fafd01d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a0a6858dd58a8b8b154e5dd149fafd01d" kindref="member">bytearray_to_IPstr</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*bytes,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*IPstr){</highlight></codeline>
<codeline lineno="1256"><highlight class="normal"><sp/><sp/>sprintf(IPstr,</highlight><highlight class="stringliteral">&quot;%i.%i.%i.%i&quot;</highlight><highlight class="normal">,(uint8_t)bytes[0],(uint8_t)bytes[1],(uint8_t)bytes[2],(uint8_t)bytes[3]);</highlight></codeline>
<codeline lineno="1257"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//printf(&quot;%s\n&quot;,<sp/>IPstr);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1258"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1259"><highlight class="normal"></highlight></codeline>
<codeline lineno="1260"><highlight class="normal"></highlight><highlight class="comment">//**************************<sp/>Convierte<sp/>de<sp/>bytes<sp/>a<sp/>enteros<sp/>**************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1261" refid="JarsControl_8h_1a19a52ae0d3c91c019542bc76a720aef9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a19a52ae0d3c91c019542bc76a720aef9" kindref="member">bytearray_to_int</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*byte_array,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num){</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>2;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/>num<sp/>+=<sp/>(uint16_t)((uint8_t)byte_array[i]<sp/>&lt;&lt;<sp/>(i*8));</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1265"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1266"><highlight class="normal"></highlight></codeline>
<codeline lineno="1267"><highlight class="normal"></highlight><highlight class="comment">//***************<sp/>Guarda<sp/>cada<sp/>numero<sp/>hexadecimal<sp/>de<sp/>la<sp/>máscara<sp/>dentro<sp/>del<sp/>arreglo<sp/>parts<sp/>en<sp/>formato<sp/>char<sp/>*******************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1268" refid="JarsControl_8h_1a9fe1a038e1882c74961f61186cc7a811" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a9fe1a038e1882c74961f61186cc7a811" kindref="member">MACstr_to_bytearray</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*MACstr,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*parts){</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*pch;</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/>uint8_t<sp/>ii=0;</highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/>pch<sp/>=<sp/>strtok<sp/>(MACstr,</highlight><highlight class="stringliteral">&quot;:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(pch<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/>{</highlight><highlight class="comment">//long<sp/>int<sp/>strtol(const<sp/>char<sp/>*str,<sp/>char<sp/>**endptr,<sp/>int<sp/>base)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/>parts[ii]<sp/>=<sp/>(char)strtol(pch,NULL,16);</highlight><highlight class="comment">//cambia<sp/>de<sp/>string<sp/>a<sp/>long<sp/>int,<sp/>tomando<sp/>el<sp/>valor<sp/>hexadecimal<sp/>16,<sp/>y<sp/>lo<sp/>guarda<sp/>como<sp/>tipo<sp/>char</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1275"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//printf(&quot;p[%i]:<sp/>%i\n&quot;,<sp/>ii,(uint8_t)parts[ii]);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/>pch<sp/>=<sp/>strtok<sp/>(NULL,<sp/></highlight><highlight class="stringliteral">&quot;:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/>ii=ii+1;</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1279"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"></highlight></codeline>
<codeline lineno="1281"><highlight class="normal"></highlight><highlight class="comment">//***************<sp/>Divide<sp/>el<sp/>numero<sp/>por<sp/>bytes<sp/>y<sp/>lo<sp/>guarda<sp/>en<sp/>arrayOfByte<sp/>*****************************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1282" refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1acdbbef5f7b2938fa8a308d3a7237723e" kindref="member">intToBytes</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>number,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*arrayOfByte,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="structjars__cmd_1a2ac9bbc25760e1a29a170271d68ea390" kindref="member">size</ref>){</highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>size;<sp/>i<sp/>&gt;<sp/>0;<sp/>i--)<sp/>{</highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/><sp/>arrayOfByte[size-i]<sp/>=<sp/>(char)(number<sp/>&gt;&gt;<sp/>((i-1)*8));</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1286"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1287"><highlight class="normal"></highlight></codeline>
<codeline lineno="1288"><highlight class="normal"></highlight><highlight class="comment">//***************<sp/>Guarda<sp/>los<sp/>valores<sp/>del<sp/>hexadecimal<sp/>en<sp/>un<sp/>arreglo<sp/>string<sp/>literal<sp/>********************************************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1289" refid="JarsControl_8h_1a186f7c0fc2f44b39853cd79d8daa6b65" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="JarsControl_8h_1a186f7c0fc2f44b39853cd79d8daa6b65" kindref="member">bytearray_to_MACstr</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*bytes,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*MACstr){</highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/>sprintf(MACstr,</highlight><highlight class="stringliteral">&quot;%02X:%02X:%02X:%02X:%02X:%02X&quot;</highlight><highlight class="normal">,(uint8_t)bytes[0],(uint8_t)bytes[1],(uint8_t)bytes[2],(uint8_t)bytes[3],(uint8_t)bytes[4],(uint8_t)bytes[5]);</highlight></codeline>
<codeline lineno="1291"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"></highlight></codeline>
<codeline lineno="1293"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Implementation<sp/>of<sp/>itoa()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1294"><highlight class="normal"></highlight><highlight class="comment">//itoa(cfg.COMMS_PORT,(char<sp/>*)info_str,10);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1295"><highlight class="normal"></highlight><highlight class="comment">//**************<sp/>Guarda<sp/>dentro<sp/>de<sp/>str<sp/>los<sp/>valores<sp/>del<sp/>num<sp/>en<sp/>caracteres<sp/>char[]<sp/>***************</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1296" refid="JarsControl_8h_1a44ec176a02a62ada468ebde1b3f6e9f0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/><ref refid="JarsControl_8h_1a44ec176a02a62ada468ebde1b3f6e9f0" kindref="member">itoa</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>str,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>base){</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isNegative<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1299"><highlight class="normal"></highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>0<sp/>explicitely,<sp/>otherwise<sp/>empty<sp/>string<sp/>is<sp/>printed<sp/>for<sp/>0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(num<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str[i++]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str[i]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>str;</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"></highlight></codeline>
<codeline lineno="1308"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>In<sp/>standard<sp/>itoa(),<sp/>negative<sp/>numbers<sp/>are<sp/>handled<sp/>only<sp/>with</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>base<sp/>10.<sp/>Otherwise<sp/>numbers<sp/>are<sp/>considered<sp/>unsigned.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(num<sp/>&lt;<sp/>0<sp/>&amp;&amp;<sp/>base<sp/>==<sp/>10)</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isNegative<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num<sp/>=<sp/>-num;</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"></highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>individual<sp/>digits</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//guarda<sp/>cada<sp/>digito<sp/>de<sp/>num<sp/>en<sp/>str<sp/>(el<sp/>último<sp/>dígito<sp/>en<sp/>el<sp/>primer<sp/>elemnto<sp/>del<sp/>str)/al<sp/>reves</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(num<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>rem<sp/>=<sp/>num<sp/>%<sp/>base;</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str[i++]<sp/>=<sp/>(rem<sp/>&gt;<sp/>9)?<sp/>(rem-10)<sp/>+<sp/></highlight><highlight class="charliteral">&apos;a&apos;</highlight><highlight class="normal"><sp/>:<sp/>rem<sp/>+<sp/></highlight><highlight class="charliteral">&apos;0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num<sp/>=<sp/>num/base;</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"></highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>number<sp/>is<sp/>negative,<sp/>append<sp/>&apos;-&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isNegative)</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str[i++]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;-&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1328"><highlight class="normal"></highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/>str[i]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>Append<sp/>string<sp/>terminator</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1330"><highlight class="normal"></highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reverse<sp/>the<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n<sp/>=<sp/>strlen(str);</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"></highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Swap<sp/>character<sp/>starting<sp/>from<sp/>two</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>corners</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=0;<sp/>i&lt;n/2;<sp/>i++)</highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>swap(str[i],<sp/>str[n-i-1]);</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"></highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>str;</highlight></codeline>
<codeline lineno="1340"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1341"><highlight class="normal"></highlight></codeline>
<codeline lineno="1342"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
    </programlisting>
    <location file="/home/itupac/OutOfTree-gnuradio/gr-SetSystem/include/SetSystem/ArgProcessor/JarsControl/JarsControl.h"/>
  </compounddef>
</doxygen>
